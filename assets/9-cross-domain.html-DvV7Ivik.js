import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,a as e}from"./app-jzX7c5DY.js";const t={},o=e(`<h2 id="nginx-é…ç½®" tabindex="-1"><a class="header-anchor" href="#nginx-é…ç½®"><span>NGINX é…ç½®</span></a></h2><blockquote><p>è®©æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼šå…è®¸è·¨åŸŸï¼ˆè¿”å› cross-origin-allow å“åº”å¤´ï¼‰</p></blockquote><div class="language-nginx line-numbers-mode" data-ext="nginx" data-title="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> ^~ /api/</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:8080/api/</span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Allow-Origin&#39;</span> <span class="token variable">$http_origin</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Allow-Credentials&#39;</span> <span class="token string">&#39;true&#39;</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">add_header</span> Access-Control-Allow-Methods <span class="token string">&#39;GET, POST, OPTIONS&#39;</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">add_header</span> Access-Control-Allow-Headers <span class="token string">&#39;*&#39;</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">if</span> (<span class="token variable">$request_method</span> = <span class="token string">&#39;OPTIONS&#39;</span>)</span> <span class="token punctuation">{</span>
        <span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Allow-Credentials&#39;</span> <span class="token string">&#39;true&#39;</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Allow-Origin&#39;</span> <span class="token variable">$http_origin</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Allow-Methods&#39;</span> <span class="token string">&#39;GET, POST, OPTIONS&#39;</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Allow-Headers&#39;</span> <span class="token string">&#39;DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range&#39;</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Access-Control-Max-Age&#39;</span> <span class="token number">1728000</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Content-Type&#39;</span> <span class="token string">&#39;text/plain; charset=utf-8&#39;</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">add_header</span> <span class="token string">&#39;Content-Length&#39;</span> <span class="token number">0</span></span><span class="token punctuation">;</span>
        <span class="token directive"><span class="token keyword">return</span> <span class="token number">204</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="åç«¯-crossorigin-é…ç½®" tabindex="-1"><a class="header-anchor" href="#åç«¯-crossorigin-é…ç½®"><span>åç«¯@CrossOrigin é…ç½®</span></a></h2><p>åœ¨ controller ä¸­æ·»åŠ æ³¨é‡Š@CrossOrigin(origin={&quot;xxxx&quot;},allowCredentials=&quot;true&quot;)</p><h3 id="webå…¨å±€è¯·æ±‚æ‹¦æˆª" tabindex="-1"><a class="header-anchor" href="#webå…¨å±€è¯·æ±‚æ‹¦æˆª"><span>webå…¨å±€è¯·æ±‚æ‹¦æˆª</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcConfg</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span><span class="token class-name">CorsRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//è®¾ç½®å…è®¸è·¨åŸŸçš„è·¯å¾„</span>
    registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span>
      <span class="token comment">//è®¾ç½®å…è®¸è·¨åŸŸè¯·æ±‚çš„åŸŸå</span>
      <span class="token comment">//å½“**Credentialsä¸ºtrueæ—¶ï¼Œ**Originä¸èƒ½ä¸ºæ˜Ÿå·ï¼Œéœ€ä¸ºå…·ä½“çš„ipåœ°å€ã€å¦‚æœæ¥å£ä¸å¸¦cookie,ipæ— éœ€è®¾æˆå…·ä½“ipã€‘</span>
      <span class="token punctuation">.</span><span class="token function">allowedOrigins</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:9527&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://127.0.0.1:9527&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://127.0.0.1:8082&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://127.0.0.1:8083&quot;</span><span class="token punctuation">)</span>
      <span class="token comment">//æ˜¯å¦å…è®¸è¯ä¹¦ ä¸å†é»˜è®¤å¼€å¯</span>
      <span class="token punctuation">.</span><span class="token function">allowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
      <span class="token comment">//è®¾ç½®å…è®¸çš„æ–¹æ³•</span>
      <span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span>
      <span class="token comment">//è·¨åŸŸå…è®¸æ—¶é—´</span>
      <span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),p=[o];function i(c,l){return s(),a("div",null,p)}const u=n(t,[["render",i],["__file","9-cross-domain.html.vue"]]),k=JSON.parse(`{"path":"/rear-end/JavaWeb/9-cross-domain.html","title":"ğŸ˜¤ 9.è·¨åŸŸè§£å†³","lang":"zh-CN","frontmatter":{"title":"ğŸ˜¤ 9.è·¨åŸŸè§£å†³","tag":["SpringBoot","JavaWeb"],"recommend":9,"description":"NGINX é…ç½® è®©æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼šå…è®¸è·¨åŸŸï¼ˆè¿”å› cross-origin-allow å“åº”å¤´ï¼‰ åç«¯@CrossOrigin é…ç½® åœ¨ controller ä¸­æ·»åŠ æ³¨é‡Š@CrossOrigin(origin={\\"xxxx\\"},allowCredentials=\\"true\\") webå…¨å±€è¯·æ±‚æ‹¦æˆª","head":[["meta",{"property":"og:url","content":"https://soft-vault.com/rear-end/JavaWeb/9-cross-domain.html"}],["meta",{"property":"og:site_name","content":"Night.Soul"}],["meta",{"property":"og:title","content":"ğŸ˜¤ 9.è·¨åŸŸè§£å†³"}],["meta",{"property":"og:description","content":"NGINX é…ç½® è®©æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼šå…è®¸è·¨åŸŸï¼ˆè¿”å› cross-origin-allow å“åº”å¤´ï¼‰ åç«¯@CrossOrigin é…ç½® åœ¨ controller ä¸­æ·»åŠ æ³¨é‡Š@CrossOrigin(origin={\\"xxxx\\"},allowCredentials=\\"true\\") webå…¨å±€è¯·æ±‚æ‹¦æˆª"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-05T17:55:50.000Z"}],["meta",{"property":"article:author","content":"Night.Soul"}],["meta",{"property":"article:tag","content":"SpringBoot"}],["meta",{"property":"article:tag","content":"JavaWeb"}],["meta",{"property":"article:modified_time","content":"2024-02-05T17:55:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ğŸ˜¤ 9.è·¨åŸŸè§£å†³\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-02-05T17:55:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Night.Soul\\",\\"url\\":\\"https://github.com/NightSquirrl\\"}]}"]]},"headers":[{"level":2,"title":"NGINX é…ç½®","slug":"nginx-é…ç½®","link":"#nginx-é…ç½®","children":[]},{"level":2,"title":"åç«¯@CrossOrigin é…ç½®","slug":"åç«¯-crossorigin-é…ç½®","link":"#åç«¯-crossorigin-é…ç½®","children":[{"level":3,"title":"webå…¨å±€è¯·æ±‚æ‹¦æˆª","slug":"webå…¨å±€è¯·æ±‚æ‹¦æˆª","link":"#webå…¨å±€è¯·æ±‚æ‹¦æˆª","children":[]}]}],"git":{"createdTime":1700480355000,"updatedTime":1707155750000,"contributors":[{"name":"zeroeldath","email":"zeroeldath@Mac-Pro.local","commits":1}]},"readingTime":{"minutes":0.9,"words":270},"filePathRelative":"rear-end/JavaWeb/9-cross-domain.md","localizedDate":"2023å¹´11æœˆ20æ—¥","excerpt":"<h2>NGINX é…ç½®</h2>\\n<blockquote>\\n<p>è®©æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨ï¼šå…è®¸è·¨åŸŸï¼ˆè¿”å› cross-origin-allow å“åº”å¤´ï¼‰</p>\\n</blockquote>\\n<div class=\\"language-nginx\\" data-ext=\\"nginx\\" data-title=\\"nginx\\"><pre class=\\"language-nginx\\"><code><span class=\\"token directive\\"><span class=\\"token keyword\\">location</span> ^~ /api/</span> <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token directive\\"><span class=\\"token keyword\\">proxy_pass</span> http://127.0.0.1:8080/api/</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> <span class=\\"token string\\">'Access-Control-Allow-Origin'</span> <span class=\\"token variable\\">$http_origin</span></span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> <span class=\\"token string\\">'Access-Control-Allow-Credentials'</span> <span class=\\"token string\\">'true'</span></span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> Access-Control-Allow-Methods <span class=\\"token string\\">'GET, POST, OPTIONS'</span></span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> Access-Control-Allow-Headers <span class=\\"token string\\">'*'</span></span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token directive\\"><span class=\\"token keyword\\">if</span> (<span class=\\"token variable\\">$request_method</span> = <span class=\\"token string\\">'OPTIONS'</span>)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> <span class=\\"token string\\">'Access-Control-Allow-Credentials'</span> <span class=\\"token string\\">'true'</span></span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> <span class=\\"token string\\">'Access-Control-Allow-Origin'</span> <span class=\\"token variable\\">$http_origin</span></span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> <span class=\\"token string\\">'Access-Control-Allow-Methods'</span> <span class=\\"token string\\">'GET, POST, OPTIONS'</span></span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> <span class=\\"token string\\">'Access-Control-Allow-Headers'</span> <span class=\\"token string\\">'DNT,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range'</span></span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> <span class=\\"token string\\">'Access-Control-Max-Age'</span> <span class=\\"token number\\">1728000</span></span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> <span class=\\"token string\\">'Content-Type'</span> <span class=\\"token string\\">'text/plain; charset=utf-8'</span></span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token directive\\"><span class=\\"token keyword\\">add_header</span> <span class=\\"token string\\">'Content-Length'</span> <span class=\\"token number\\">0</span></span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token directive\\"><span class=\\"token keyword\\">return</span> <span class=\\"token number\\">204</span></span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre></div>","autoDesc":true}`);export{u as comp,k as data};
