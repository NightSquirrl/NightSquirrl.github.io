import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as a,c as s,a as e}from"./app-jzX7c5DY.js";const t={},p=e(`<h2 id="_1-å…¥é—¨" tabindex="-1"><a class="header-anchor" href="#_1-å…¥é—¨"><span>1. å…¥é—¨</span></a></h2><h3 id="_1-1-å¼•å…¥mybatisplusçš„èµ·æ­¥ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1-1-å¼•å…¥mybatisplusçš„èµ·æ­¥ä¾èµ–"><span>1.1 å¼•å…¥MybatisPlusçš„èµ·æ­¥ä¾èµ–</span></a></h3><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token comment">&lt;!--MybatisPlus--&gt;</span>\v<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>\v    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>\v    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>\v    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.3.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>\v<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-å®šä¹‰mapper" tabindex="-1"><a class="header-anchor" href="#_1-2-å®šä¹‰mapper"><span>1.2 å®šä¹‰Mapper</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserMapper</span> <span class="token keyword">extends</span> <span class="token class-name">BaseMapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>\v\v<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-å¸¸è§æ³¨é‡Š" tabindex="-1"><a class="header-anchor" href="#_1-3-å¸¸è§æ³¨é‡Š"><span>1.3 å¸¸è§æ³¨é‡Š</span></a></h3><p>MybatisPlusä¸­æ¯”è¾ƒå¸¸ç”¨çš„å‡ ä¸ªæ³¨è§£å¦‚ä¸‹ï¼š</p><p>@TableNameï¼šç”¨æ¥æŒ‡å®šè¡¨å</p><p>@TableIdï¼šç”¨æ¥æŒ‡å®šè¡¨ä¸­çš„ä¸»é”®å­—æ®µä¿¡æ¯</p><p>@TableFieldï¼šç”¨æ¥æŒ‡å®šè¡¨ä¸­çš„æ™®é€šå­—æ®µä¿¡æ¯</p><blockquote><p>IdTypeæšä¸¾ï¼š</p><p>â€‹ AUTOï¼šæ•°æ®åº“è‡ªå¢é•¿</p><p>â€‹ INPUTï¼šé€šè¿‡setæ–¹æ³•è‡ªè¡Œè¾“å…¥</p><p>â€‹ ASSIGN_IDï¼šåˆ†é… IDï¼Œæ¥å£IdentifierGeneratorçš„æ–¹æ³•nextIdæ¥ç”Ÿæˆidï¼Œé»˜è®¤å®ç°ç±»ä¸ºDefaultIdentifierGeneratoré›ªèŠ±ç®—æ³•</p><p>ä½¿ç”¨@TableFieldçš„å¸¸è§åœºæ™¯ï¼š</p><p>â€‹ æˆå‘˜å˜é‡åä¸æ•°æ®åº“å­—æ®µåä¸ä¸€è‡´</p><p>â€‹ æˆå‘˜å˜é‡åä»¥iså¼€å¤´ï¼Œä¸”æ˜¯å¸ƒå°”å€¼</p><p>â€‹ æˆå‘˜å˜é‡åä¸æ•°æ®åº“å…³é”®å­—å†²çª</p><p>â€‹ æˆå‘˜å˜é‡ä¸æ˜¯æ•°æ®åº“å­—æ®µ</p></blockquote><figure><img src="https://img.picgo.net/2023/11/21/image-2023112117193919037ca944e29689139.png" alt="image-20231121171939190" tabindex="0" loading="lazy"><figcaption>image-20231121171939190</figcaption></figure><h3 id="_1-4-å¸¸è§é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-4-å¸¸è§é…ç½®"><span>1.4 å¸¸è§é…ç½®</span></a></h3><div class="language-properties line-numbers-mode" data-ext="properties" data-title="properties"><pre class="language-properties"><code><span class="token key attr-name">mybatis-plus</span><span class="token punctuation">:</span>
<span class="token key attr-name">  type-aliases-package</span><span class="token punctuation">:</span> <span class="token value attr-value">com.itheima.mp.domain.po # åˆ«åæ‰«æåŒ…</span>
<span class="token key attr-name">  mapper-locations</span><span class="token punctuation">:</span> <span class="token value attr-value">&quot;classpath*:/mapper/**/*.xml&quot; # Mapper.xmlæ–‡ä»¶åœ°å€ï¼Œé»˜è®¤å€¼</span>
<span class="token key attr-name">  configuration</span><span class="token punctuation">:</span>
<span class="token comment">      # è¿™ä¸ªé…ç½®ä¼šå°†æ‰§è¡Œçš„sqlæ‰“å°å‡ºæ¥ï¼Œåœ¨å¼€å‘æˆ–æµ‹è¯•çš„æ—¶å€™å¯ä»¥ç”¨</span>
<span class="token key attr-name">     log-impl</span><span class="token punctuation">:</span> <span class="token value attr-value">org.apache.ibatis.logging.stdout.StdOutImpl</span>
<span class="token key attr-name">      map-underscore-to-camel-case</span><span class="token punctuation">:</span> <span class="token value attr-value">true # æ˜¯å¦å¼€å¯ä¸‹åˆ’çº¿å’Œé©¼å³°çš„æ˜ å°„ é»˜è®¤æ˜¯å¼€å¯çš„</span>
<span class="token key attr-name">      cache-enabled</span><span class="token punctuation">:</span> <span class="token value attr-value">false # æ˜¯å¦å¼€å¯äºŒçº§ç¼“å­˜</span>
<span class="token key attr-name">  global-config</span><span class="token punctuation">:</span>
<span class="token key attr-name">      db-config</span><span class="token punctuation">:</span>
<span class="token key attr-name">        id-type</span><span class="token punctuation">:</span> <span class="token value attr-value">assign_id # idä¸ºé›ªèŠ±ç®—æ³•ç”Ÿæˆ</span>
<span class="token key attr-name">        update-strategy</span><span class="token punctuation">:</span> <span class="token value attr-value">not_null # æ›´æ–°ç­–ç•¥ï¼šåªæ›´æ–°éç©ºå­—æ®µ</span>
<span class="token key attr-name">        logic-delete-field</span><span class="token punctuation">:</span> <span class="token value attr-value">isDelete # å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå(since 3.3.0,é…ç½®åå¯ä»¥å¿½ç•¥ä¸é…ç½®æ­¥éª¤2)</span>
<span class="token key attr-name">        logic-delete-value</span><span class="token punctuation">:</span> <span class="token value attr-value">1 # é€»è¾‘å·²åˆ é™¤å€¼(é»˜è®¤ä¸º 1)</span>
<span class="token key attr-name">        logic-not-delete-value</span><span class="token punctuation">:</span> <span class="token value attr-value">0 # é€»è¾‘æœªåˆ é™¤å€¼(é»˜è®¤ä¸º 0)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-æ ¸å¿ƒ" tabindex="-1"><a class="header-anchor" href="#_2-æ ¸å¿ƒ"><span>2. æ ¸å¿ƒ</span></a></h2><h3 id="_2-1-æ¡ä»¶æ„é€ å™¨" tabindex="-1"><a class="header-anchor" href="#_2-1-æ¡ä»¶æ„é€ å™¨"><span>2.1 æ¡ä»¶æ„é€ å™¨</span></a></h3><figure><img src="https://img.picgo.net/2023/11/21/image-20231121173009354456ab5bd720f571b.png" alt="image-20231121173009354" tabindex="0" loading="lazy"><figcaption>image-20231121173009354</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  	<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">like</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;o&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">ge</span><span class="token punctuation">(</span><span class="token string">&quot;balance&quot;</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-è‡ªå®šä¹‰-sql" tabindex="-1"><a class="header-anchor" href="#_2-2-è‡ªå®šä¹‰-sql"><span>2.2 è‡ªå®šä¹‰ sql</span></a></h3><blockquote><p>å°†idåœ¨æŒ‡å®šèŒƒå›´çš„ç”¨æˆ·ï¼ˆä¾‹å¦‚1ã€2ã€4 ï¼‰çš„ä½™é¢æ‰£å‡æŒ‡å®šå€¼</p></blockquote><ol><li>åŸºäº Wrapperæ„å»º where æ¡ä»¶</li></ol><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> ids <span class="token operator">=</span> <span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">,</span> <span class="token number">2L</span><span class="token punctuation">,</span> <span class="token number">4L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> amount <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
<span class="token comment">// 1.æ„å»ºæ¡ä»¶</span>
<span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> wrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token operator">::</span><span class="token function">getId</span><span class="token punctuation">,</span> ids<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2.è‡ªå®šä¹‰SQLæ–¹æ³•è°ƒç”¨</span>
userMapper<span class="token punctuation">.</span><span class="token function">updateBalanceByIds</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">,</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>åœ¨mapperæ–¹æ³•å‚æ•°ä¸­ç”¨Paramæ³¨è§£å£°æ˜wrapperå˜é‡åç§°ï¼Œå¿…é¡»æ˜¯ew</li></ol><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">updateBalanceByIds</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;ew&quot;</span><span class="token punctuation">)</span> <span class="token class-name">LambdaQueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> wrapper<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;amount&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> amount<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><p>è‡ªå®šä¹‰SQLï¼Œå¹¶ä½¿ç”¨Wrapperæ¡ä»¶</p><div class="language-xml line-numbers-mode" data-ext="xml" data-title="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>update</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>updateBalanceByIds<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  UPDATE tb_user SET balance = balance - #{amount} \${ew.customSqlSegment}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>update</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="_2-3-iservice" tabindex="-1"><a class="header-anchor" href="#_2-3-iservice"><span>2.3 IService</span></a></h3><blockquote><p>ä¿å­˜</p><p>save()</p><p>åˆ é™¤</p><p>remove()</p><p>æ›´æ–°</p><p>update()</p><p>æŸ¥</p><p>ä¸€ä¸ª</p><p>get()</p><p>å¤šä¸ª</p><p>list</p><p>æ•°é‡</p><p>count</p><p>åˆ†é¡µ page</p><p>lambda</p></blockquote><p>ä½¿ç”¨</p><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token comment">//æ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IUserService</span> <span class="token keyword">extends</span> <span class="token class-name">IService</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

<span class="token comment">// å®ç°ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserMappler</span><span class="token punctuation">,</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">IUserService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-è‡ªåŠ¨é‡å¡«" tabindex="-1"><a class="header-anchor" href="#_2-4-è‡ªåŠ¨é‡å¡«"><span>2.4 è‡ªåŠ¨é‡å¡«</span></a></h3><blockquote><p>å®ç°æ—¶é—´çš„è‡ªåŠ¨æ›´æ–°:</p><p>@TableField(fill = FieldFill.INSERT)</p><p>createTime</p><p>@TableField(fill = FieldFill.insert_update)</p><p>updateTime</p></blockquote><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMeteObjectHandler</span> <span class="token keyword">implements</span> <span class="token class-name">MetaObjectHandler</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insertFill</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setFieldValByName</span><span class="token punctuation">(</span><span class="token string">&quot;createTime&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setFieldValByName</span><span class="token punctuation">(</span><span class="token string">&quot;updateTime&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateFill</span><span class="token punctuation">(</span><span class="token class-name">MetaObject</span> metaObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setFieldValByName</span><span class="token punctuation">(</span><span class="token string">&quot;updateTime&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> metaObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-5-ä¹è§‚é”" tabindex="-1"><a class="header-anchor" href="#_2-5-ä¹è§‚é”"><span>2.5 ä¹è§‚é”</span></a></h3><p>ä¹è§‚é”çš„å®ç°æ–¹å¼:</p><ul><li>å–å‡ºè®°å½•çš„æ—¶å€™è·å–å½“å‰çš„ version</li><li>æ›´æ–°çš„æ—¶å€™,å¸¦ä¸Šè¿™ä¸ªversion</li><li>æ‰§è¡Œæ›´æ–°æ—¶,set version = new version where version = oldversion</li><li>å¦‚æœ version ä¸å¯¹,å°±ä¼šæ›´æ–°å¤±è´¥</li></ul><h4 id="å®ç°æ­¥éª¤" tabindex="-1"><a class="header-anchor" href="#å®ç°æ­¥éª¤"><span>å®ç°æ­¥éª¤</span></a></h4><ol><li>ç»™æ•°æ®åº“æ·»åŠ version å­—æ®µ,é»˜è®¤å€¼ä¸º 1</li><li>å®ä½“ç±»åŠ å¯¹åº”çš„å­—æ®µ</li></ol><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Version</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> version
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><p>é…ç½®ç±»</p><ol><li><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableTransactionManagement</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;com.whattools.usercenter.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBatisPlusConfig</span> <span class="token punctuation">{</span>
<span class="token comment">//    æ³¨å†Œä¹è§‚é”æ’ä»¶</span>
<span class="token comment">//    @Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">OptimisticLockerInterceptor</span> <span class="token function">optimisticLockerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OptimisticLockerInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li></li></ol></li></ol><h3 id="_2-6-åˆ†é¡µæ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-6-åˆ†é¡µæ’ä»¶"><span>2.6 åˆ†é¡µæ’ä»¶</span></a></h3><h4 id="æ·»åŠ é…ç½®é¡¹" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ é…ç½®é¡¹"><span>æ·»åŠ é…ç½®é¡¹</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">&quot;scan.your.mapper.package&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisPlusConfig</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * æ·»åŠ åˆ†é¡µæ’ä»¶
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MybatisPlusInterceptor</span> <span class="token function">mybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å®Œæ•´ç‰ˆæœ¬</span>
        <span class="token class-name">MybatisPlusInterceptor</span> interceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        interceptor<span class="token punctuation">.</span><span class="token function">addInnerInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PaginationInnerInterceptor</span><span class="token punctuation">(</span><span class="token class-name">DbType</span><span class="token punctuation">.</span><span class="token constant">MYSQL</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¦‚æœé…ç½®å¤šä¸ªæ’ä»¶,åˆ‡è®°åˆ†é¡µæœ€åæ·»åŠ </span>
        <span class="token comment">//interceptor.addInnerInterceptor(new PaginationInnerInterceptor()); å¦‚æœæœ‰å¤šæ•°æ®æºå¯ä»¥ä¸é…å…·ä½“ç±»å‹ å¦åˆ™éƒ½å»ºè®®é…ä¸Šå…·ä½“çš„DbType</span>
        <span class="token keyword">return</span> interceptor<span class="token punctuation">;</span>
      
      
      <span class="token comment">// ç®€åŒ–ç‰ˆæœ¬</span>
       <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MybatisPlusInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨"><span>ä½¿ç”¨</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token class-name">Page</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
userMapper<span class="token punctuation">.</span><span class="token function">selectPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
page<span class="token punctuation">.</span><span class="token function">getRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-7-é€»è¾‘åˆ é™¤" tabindex="-1"><a class="header-anchor" href="#_2-7-é€»è¾‘åˆ é™¤"><span>2.7 é€»è¾‘åˆ é™¤</span></a></h3><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@TableLogic</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> deleted<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="é…ç½®" tabindex="-1"><a class="header-anchor" href="#é…ç½®"><span>é…ç½®</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code>mybatis<span class="token operator">-</span>plus<span class="token operator">:</span>
  global<span class="token operator">-</span>config<span class="token operator">:</span>
    db<span class="token operator">-</span>config<span class="token operator">:</span>
      logic<span class="token operator">-</span>delete<span class="token operator">-</span>field<span class="token operator">:</span> flag # å…¨å±€é€»è¾‘åˆ é™¤çš„å®ä½“å­—æ®µå<span class="token punctuation">(</span>since <span class="token number">3.3</span><span class="token number">.0</span><span class="token punctuation">,</span>é…ç½®åå¯ä»¥å¿½ç•¥ä¸é…ç½®æ­¥éª¤<span class="token number">2</span><span class="token punctuation">)</span>
      logic<span class="token operator">-</span>delete<span class="token operator">-</span>value<span class="token operator">:</span> <span class="token number">1</span> # é€»è¾‘å·²åˆ é™¤å€¼<span class="token punctuation">(</span>é»˜è®¤ä¸º <span class="token number">1</span><span class="token punctuation">)</span>
      logic<span class="token operator">-</span>not<span class="token operator">-</span>delete<span class="token operator">-</span>value<span class="token operator">:</span> <span class="token number">0</span> # é€»è¾‘æœªåˆ é™¤å€¼<span class="token punctuation">(</span>é»˜è®¤ä¸º <span class="token number">0</span><span class="token punctuation">)</span>
        
        
æˆ–è€…
        
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">ISqlInjector</span> <span class="token function">sqlInjector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LogicSqlInjector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-8-æ€§èƒ½åˆ†ææ’ä»¶" tabindex="-1"><a class="header-anchor" href="#_2-8-æ€§èƒ½åˆ†ææ’ä»¶"><span>2.8 æ€§èƒ½åˆ†ææ’ä»¶</span></a></h3><h4 id="é…ç½®-1" tabindex="-1"><a class="header-anchor" href="#é…ç½®-1"><span>é…ç½®</span></a></h4><div class="language-java line-numbers-mode" data-ext="java" data-title="java"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;dev&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">PerformanceInterceptor</span> <span class="token function">performanceInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,51),l=[p];function c(o,i){return a(),s("div",null,l)}const d=n(t,[["render",c],["__file","10-mybatis-plus.html.vue"]]),k=JSON.parse('{"path":"/rear-end/JavaWeb/10-mybatis-plus.html","title":"ğŸ˜¤ 10.Mybatis-plus","lang":"zh-CN","frontmatter":{"title":"ğŸ˜¤ 10.Mybatis-plus","tag":["SpringBoot","JavaWeb","Mybatis-plus"],"recommend":9,"description":"1. å…¥é—¨ 1.1 å¼•å…¥MybatisPlusçš„èµ·æ­¥ä¾èµ– 1.2 å®šä¹‰Mapper 1.3 å¸¸è§æ³¨é‡Š MybatisPlusä¸­æ¯”è¾ƒå¸¸ç”¨çš„å‡ ä¸ªæ³¨è§£å¦‚ä¸‹ï¼š @TableNameï¼šç”¨æ¥æŒ‡å®šè¡¨å @TableIdï¼šç”¨æ¥æŒ‡å®šè¡¨ä¸­çš„ä¸»é”®å­—æ®µä¿¡æ¯ @TableFieldï¼šç”¨æ¥æŒ‡å®šè¡¨ä¸­çš„æ™®é€šå­—æ®µä¿¡æ¯ IdTypeæšä¸¾ï¼š â€‹ AUTOï¼šæ•°æ®åº“è‡ªå¢é•¿ â€‹ INPUTï¼šé€šè¿‡...","head":[["meta",{"property":"og:url","content":"https://soft-vault.com/rear-end/JavaWeb/10-mybatis-plus.html"}],["meta",{"property":"og:site_name","content":"Night.Soul"}],["meta",{"property":"og:title","content":"ğŸ˜¤ 10.Mybatis-plus"}],["meta",{"property":"og:description","content":"1. å…¥é—¨ 1.1 å¼•å…¥MybatisPlusçš„èµ·æ­¥ä¾èµ– 1.2 å®šä¹‰Mapper 1.3 å¸¸è§æ³¨é‡Š MybatisPlusä¸­æ¯”è¾ƒå¸¸ç”¨çš„å‡ ä¸ªæ³¨è§£å¦‚ä¸‹ï¼š @TableNameï¼šç”¨æ¥æŒ‡å®šè¡¨å @TableIdï¼šç”¨æ¥æŒ‡å®šè¡¨ä¸­çš„ä¸»é”®å­—æ®µä¿¡æ¯ @TableFieldï¼šç”¨æ¥æŒ‡å®šè¡¨ä¸­çš„æ™®é€šå­—æ®µä¿¡æ¯ IdTypeæšä¸¾ï¼š â€‹ AUTOï¼šæ•°æ®åº“è‡ªå¢é•¿ â€‹ INPUTï¼šé€šè¿‡..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://img.picgo.net/2023/11/21/image-2023112117193919037ca944e29689139.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-05T17:55:50.000Z"}],["meta",{"property":"article:author","content":"Night.Soul"}],["meta",{"property":"article:tag","content":"SpringBoot"}],["meta",{"property":"article:tag","content":"JavaWeb"}],["meta",{"property":"article:tag","content":"Mybatis-plus"}],["meta",{"property":"article:modified_time","content":"2024-02-05T17:55:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ğŸ˜¤ 10.Mybatis-plus\\",\\"image\\":[\\"https://img.picgo.net/2023/11/21/image-2023112117193919037ca944e29689139.png\\",\\"https://img.picgo.net/2023/11/21/image-20231121173009354456ab5bd720f571b.png\\"],\\"dateModified\\":\\"2024-02-05T17:55:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Night.Soul\\",\\"url\\":\\"https://github.com/NightSquirrl\\"}]}"]]},"headers":[{"level":2,"title":"1. å…¥é—¨","slug":"_1-å…¥é—¨","link":"#_1-å…¥é—¨","children":[{"level":3,"title":"1.1 å¼•å…¥MybatisPlusçš„èµ·æ­¥ä¾èµ–","slug":"_1-1-å¼•å…¥mybatisplusçš„èµ·æ­¥ä¾èµ–","link":"#_1-1-å¼•å…¥mybatisplusçš„èµ·æ­¥ä¾èµ–","children":[]},{"level":3,"title":"1.2 å®šä¹‰Mapper","slug":"_1-2-å®šä¹‰mapper","link":"#_1-2-å®šä¹‰mapper","children":[]},{"level":3,"title":"1.3 å¸¸è§æ³¨é‡Š","slug":"_1-3-å¸¸è§æ³¨é‡Š","link":"#_1-3-å¸¸è§æ³¨é‡Š","children":[]},{"level":3,"title":"1.4 å¸¸è§é…ç½®","slug":"_1-4-å¸¸è§é…ç½®","link":"#_1-4-å¸¸è§é…ç½®","children":[]}]},{"level":2,"title":"2. æ ¸å¿ƒ","slug":"_2-æ ¸å¿ƒ","link":"#_2-æ ¸å¿ƒ","children":[{"level":3,"title":"2.1 æ¡ä»¶æ„é€ å™¨","slug":"_2-1-æ¡ä»¶æ„é€ å™¨","link":"#_2-1-æ¡ä»¶æ„é€ å™¨","children":[]},{"level":3,"title":"2.2 è‡ªå®šä¹‰ sql","slug":"_2-2-è‡ªå®šä¹‰-sql","link":"#_2-2-è‡ªå®šä¹‰-sql","children":[]},{"level":3,"title":"2.3 IService","slug":"_2-3-iservice","link":"#_2-3-iservice","children":[]},{"level":3,"title":"2.4 è‡ªåŠ¨é‡å¡«","slug":"_2-4-è‡ªåŠ¨é‡å¡«","link":"#_2-4-è‡ªåŠ¨é‡å¡«","children":[]},{"level":3,"title":"2.5 ä¹è§‚é”","slug":"_2-5-ä¹è§‚é”","link":"#_2-5-ä¹è§‚é”","children":[]},{"level":3,"title":"2.6 åˆ†é¡µæ’ä»¶","slug":"_2-6-åˆ†é¡µæ’ä»¶","link":"#_2-6-åˆ†é¡µæ’ä»¶","children":[]},{"level":3,"title":"2.7 é€»è¾‘åˆ é™¤","slug":"_2-7-é€»è¾‘åˆ é™¤","link":"#_2-7-é€»è¾‘åˆ é™¤","children":[]},{"level":3,"title":"2.8 æ€§èƒ½åˆ†ææ’ä»¶","slug":"_2-8-æ€§èƒ½åˆ†ææ’ä»¶","link":"#_2-8-æ€§èƒ½åˆ†ææ’ä»¶","children":[]}]}],"git":{"createdTime":1700561461000,"updatedTime":1707155750000,"contributors":[{"name":"zeroeldath","email":"zeroeldath@Mac-Pro.local","commits":1}]},"readingTime":{"minutes":3.38,"words":1013},"filePathRelative":"rear-end/JavaWeb/10-mybatis-plus.md","localizedDate":"2023å¹´11æœˆ21æ—¥","excerpt":"<h2>1. å…¥é—¨</h2>\\n<h3>1.1 å¼•å…¥MybatisPlusçš„èµ·æ­¥ä¾èµ–</h3>\\n<div class=\\"language-xml\\" data-ext=\\"xml\\" data-title=\\"xml\\"><pre class=\\"language-xml\\"><code><span class=\\"token comment\\">&lt;!--MybatisPlus--&gt;</span>\\u000b<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>dependency</span><span class=\\"token punctuation\\">&gt;</span></span>\\u000b    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>groupId</span><span class=\\"token punctuation\\">&gt;</span></span>com.baomidou<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>groupId</span><span class=\\"token punctuation\\">&gt;</span></span>\\u000b    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>artifactId</span><span class=\\"token punctuation\\">&gt;</span></span>mybatis-plus-boot-starter<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>artifactId</span><span class=\\"token punctuation\\">&gt;</span></span>\\u000b    <span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;</span>version</span><span class=\\"token punctuation\\">&gt;</span></span>3.5.3.1<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>version</span><span class=\\"token punctuation\\">&gt;</span></span>\\u000b<span class=\\"token tag\\"><span class=\\"token tag\\"><span class=\\"token punctuation\\">&lt;/</span>dependency</span><span class=\\"token punctuation\\">&gt;</span></span>\\n\\n</code></pre></div>","autoDesc":true}');export{d as comp,k as data};
