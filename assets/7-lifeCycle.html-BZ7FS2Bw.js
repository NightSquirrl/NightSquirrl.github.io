import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as a,c as t,b as n,a as e}from"./app-jzX7c5DY.js";const p={},o=n("h1",{id:"ç”Ÿå‘½å‘¨æœŸ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ç”Ÿå‘½å‘¨æœŸ"},[n("span",null,"ç”Ÿå‘½å‘¨æœŸ")])],-1),i=n("iframe",{style:{border:"1px solid rgba(0, 0, 0, 0.1)"},sandbox:"allow-scripts allow-popups allow-forms allow-modals allow-same-origin",width:"800",height:"450",src:"https://pixso.cn/app/ifr?url=https://pixso.cn/app/board/bnFWVuhoAUXEjcEF2odNsg",allowfullscreen:""},null,-1),c=e(`<h2 id="entryability-æ–‡ä»¶" tabindex="-1"><a class="header-anchor" href="#entryability-æ–‡ä»¶"><span>EntryAbility æ–‡ä»¶</span></a></h2><blockquote><p>hilog.info æ—¥å¿—</p><p>&#39;%{public}s&#39; public è¡¨ç¤ºæ—¥å¿—æ˜¯å¦å…¬å¼€</p></blockquote><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token keyword">import</span> UIAbility <span class="token keyword">from</span> <span class="token string">&#39;@ohos.app.ability.UIAbility&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> hilog <span class="token keyword">from</span> <span class="token string">&#39;@ohos.hilog&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> window <span class="token keyword">from</span> <span class="token string">&#39;@ohos.window&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">EntryAbility</span> <span class="token keyword">extends</span> <span class="token class-name">UIAbility</span> <span class="token punctuation">{</span>
  <span class="token function">onCreate</span><span class="token punctuation">(</span>want<span class="token punctuation">,</span> launchParam<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    hilog<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token number">0x0000</span><span class="token punctuation">,</span> <span class="token string">&#39;testTag&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;%{public}s&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Ability onCreate&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    hilog<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token number">0x0000</span><span class="token punctuation">,</span> <span class="token string">&#39;testTag&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;%{public}s&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Ability onDestroy&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">onWindowStageCreate</span><span class="token punctuation">(</span>windowStage<span class="token operator">:</span> window<span class="token punctuation">.</span>WindowStage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Main window is created, set main page for this ability</span>
    hilog<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token number">0x0000</span><span class="token punctuation">,</span> <span class="token string">&#39;testTag&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;%{public}s&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Ability onWindowStageCreate&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// æ‰“å¼€é¦–å±çš„é¡µé¢</span>
    windowStage<span class="token punctuation">.</span><span class="token function">loadContent</span><span class="token punctuation">(</span><span class="token string">&#39;pages/Index&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>code<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        hilog<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token number">0x0000</span><span class="token punctuation">,</span> <span class="token string">&#39;testTag&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Failed to load the content. Cause: %{public}s&#39;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      hilog<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token number">0x0000</span><span class="token punctuation">,</span> <span class="token string">&#39;testTag&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Succeeded in loading the content. Data: %{public}s&#39;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// é”€æ¯</span>
  <span class="token function">onWindowStageDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Main window is destroyed, release UI related resources</span>
    hilog<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token number">0x0000</span><span class="token punctuation">,</span> <span class="token string">&#39;testTag&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;%{public}s&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Ability onWindowStageDestroy&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// å¤„äºå‰å°</span>
  <span class="token function">onForeground</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Ability has brought to foreground</span>
    hilog<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token number">0x0000</span><span class="token punctuation">,</span> <span class="token string">&#39;testTag&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;%{public}s&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Ability onForeground&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// å¤„äºåå° -- å³åˆ‡æ¢åˆ°ä»»åŠ¡ä¸­å¿ƒ</span>
  <span class="token function">onBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Ability has back to background</span>
    hilog<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token number">0x0000</span><span class="token punctuation">,</span> <span class="token string">&#39;testTag&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;%{public}s&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Ability onBackground&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="uiability-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#uiability-æ¨¡å¼"><span>UIAbility æ¨¡å¼</span></a></h2><blockquote><p>ä¿®æ”¹æ¨¡å¼</p><p>åœ¨æ¯ä¸ª entry çš„æ¨¡å—ä¸­</p><p>module.json5</p><p>â€‹ launchType</p></blockquote><h3 id="singleton-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#singleton-æ¨¡å¼"><span>Singleton æ¨¡å¼</span></a></h3><p>åªä¼šå­˜åœ¨ä¸€ä¸ªåå°çš„å®ä¾‹</p><h3 id="standard-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#standard-æ¨¡å¼"><span>Standard æ¨¡å¼</span></a></h3><p>æ¯æ¬¡æ‰“å¼€,åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹,ä¿ç•™æ—§</p><h3 id="multitonæ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#multitonæ¨¡å¼"><span>multitonæ¨¡å¼</span></a></h3><p>æ¯æ¬¡æ‰“å¼€,åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹,åˆ é™¤æ—§</p><h3 id="specified-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#specified-æ¨¡å¼"><span>specified æ¨¡å¼</span></a></h3><p>ä¸ºæ¯ä¸ªå®ä¾‹è®¾ç½® key æ ‡è¯† ç±»ä¼¼åŒæ—¶ç¼–è¾‘å¤šä¸ªä¸åŒçš„æ–‡æ¡£</p><div class="language-typescript line-numbers-mode" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="token comment">// 1</span>
<span class="token comment">// è·å–ä¸Šä¸‹æ–‡</span>
context <span class="token operator">=</span> <span class="token function">getContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token keyword">as</span> common<span class="token punctuation">.</span>UIAbilityContext<span class="token punctuation">;</span>
<span class="token comment">// æŒ‡å®šè¦è·³è½¬çš„UIAbility ä¿¡æ¯</span>
<span class="token keyword">let</span> want <span class="token operator">=</span> <span class="token punctuation">{</span>
  deviceId<span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">// æƒ³è¦è·³è½¬çš„è®¾å¤‡ id ä¸ºç©ºè¡¨ç¤ºæœ¬åº”ç”¨ (è¡¨ç¤ºå¯ä»¥è·¨è®¾å¤‡è·³è½¬)</span>
  bundleName<span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">// æƒ³è¦è·³è½¬çš„åº”ç”¨åŒ…å</span>
  abilityName<span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  moduleName<span class="token operator">:</span><span class="token string">&quot;entry&quot;</span><span class="token punctuation">,</span> <span class="token comment">// éå¿…å¡«</span>
  parameter<span class="token operator">:</span><span class="token punctuation">{</span>
    <span class="token comment">// è‡ªå®šä¹‰æ–¹æ³•,ç”Ÿæˆç›®æ ‡ UIAbility å®ä¾‹çš„ key</span>
    instanceKey<span class="token operator">:</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getInstanceKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// å°è¯•æ‹‰èµ·ç›®æ ‡ UIAbility å®ä¾‹</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">startAbility</span><span class="token punctuation">(</span>want<span class="token punctuation">)</span>

<span class="token comment">// 2</span>
<span class="token comment">//åœ¨Abi1 ityStageçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒä¸­ä¸ºç›®æ ‡UIAbility.å®ä¾‹ç”Ÿæˆey</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">MyAbilityStage</span> <span class="token keyword">extends</span> <span class="token class-name">AbilityStage</span><span class="token punctuation">{</span>
<span class="token function">onAcceptWant</span><span class="token punctuation">(</span>want<span class="token operator">:</span>Want<span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span>
<span class="token comment">//åˆ¤æ–­å½“å‰è¦æ‹‰å–çš„æ˜¯å¦æ˜¯DocumentAbility</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>want<span class="token punctuation">.</span>abilityName <span class="token operator">===</span><span class="token string">&#39;DocumentAbility&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//æ ¹æ®å‚æ•°ä¸­çš„nstanceKeyå‚æ•°æ‹¼æ¥ç”Ÿæˆä¸€ä¸ªkeyå€¼å¹¶è¿”å›</span>
		<span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">DocAbility_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>want<span class="token punctuation">.</span>parameters<span class="token punctuation">.</span>instanceKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// 3</span>
<span class="token comment">//3.åœ¨module,J5on5ç½®æ–‡ä»¶ä¸­ï¼Œé€šè¿‡srcEntié—¨yå‚æ•°æŒ‡å®šAblçš„y5tageè·¯å¾„</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;module&quot;</span><span class="token operator">:</span>
	<span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;entry&quot;</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;entry&quot;</span><span class="token punctuation">,</span>
	<span class="token string-property property">&quot;srcEntry&quot;</span><span class="token operator">:</span><span class="token string">&quot;./ets/myabilitystage/MyAbilityStage.ts&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,14),l=[o,i,c];function u(r,d){return a(),t("div",null,l)}const b=s(p,[["render",u],["__file","7-lifeCycle.html.vue"]]),v=JSON.parse(`{"path":"/web/harmony/7-lifeCycle.html","title":"ğŸ¦‹ 7-ç”Ÿå‘½å‘¨æœŸ","lang":"zh-CN","frontmatter":{"title":"ğŸ¦‹ 7-ç”Ÿå‘½å‘¨æœŸ","tag":["harmony"],"star":true,"description":"ç”Ÿå‘½å‘¨æœŸ EntryAbility æ–‡ä»¶ hilog.info æ—¥å¿— '%{public}s' public è¡¨ç¤ºæ—¥å¿—æ˜¯å¦å…¬å¼€ UIAbility æ¨¡å¼ ä¿®æ”¹æ¨¡å¼ åœ¨æ¯ä¸ª entry çš„æ¨¡å—ä¸­ module.json5 â€‹ launchType Singleton æ¨¡å¼ åªä¼šå­˜åœ¨ä¸€ä¸ªåå°çš„å®ä¾‹ Standard æ¨¡å¼ æ¯æ¬¡æ‰“å¼€,åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹,ä¿ç•™æ—§...","head":[["meta",{"property":"og:url","content":"https://soft-vault.com/web/harmony/7-lifeCycle.html"}],["meta",{"property":"og:site_name","content":"Night.Soul"}],["meta",{"property":"og:title","content":"ğŸ¦‹ 7-ç”Ÿå‘½å‘¨æœŸ"}],["meta",{"property":"og:description","content":"ç”Ÿå‘½å‘¨æœŸ EntryAbility æ–‡ä»¶ hilog.info æ—¥å¿— '%{public}s' public è¡¨ç¤ºæ—¥å¿—æ˜¯å¦å…¬å¼€ UIAbility æ¨¡å¼ ä¿®æ”¹æ¨¡å¼ åœ¨æ¯ä¸ª entry çš„æ¨¡å—ä¸­ module.json5 â€‹ launchType Singleton æ¨¡å¼ åªä¼šå­˜åœ¨ä¸€ä¸ªåå°çš„å®ä¾‹ Standard æ¨¡å¼ æ¯æ¬¡æ‰“å¼€,åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹,ä¿ç•™æ—§..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-11T16:41:41.000Z"}],["meta",{"property":"article:author","content":"Night.Soul"}],["meta",{"property":"article:tag","content":"harmony"}],["meta",{"property":"article:modified_time","content":"2024-05-11T16:41:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"ğŸ¦‹ 7-ç”Ÿå‘½å‘¨æœŸ\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-11T16:41:41.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Night.Soul\\",\\"url\\":\\"https://github.com/NightSquirrl\\"}]}"]]},"headers":[{"level":2,"title":"EntryAbility æ–‡ä»¶","slug":"entryability-æ–‡ä»¶","link":"#entryability-æ–‡ä»¶","children":[]},{"level":2,"title":"UIAbility æ¨¡å¼","slug":"uiability-æ¨¡å¼","link":"#uiability-æ¨¡å¼","children":[{"level":3,"title":"Singleton æ¨¡å¼","slug":"singleton-æ¨¡å¼","link":"#singleton-æ¨¡å¼","children":[]},{"level":3,"title":"Standard æ¨¡å¼","slug":"standard-æ¨¡å¼","link":"#standard-æ¨¡å¼","children":[]},{"level":3,"title":"multitonæ¨¡å¼","slug":"multitonæ¨¡å¼","link":"#multitonæ¨¡å¼","children":[]},{"level":3,"title":"specified æ¨¡å¼","slug":"specified-æ¨¡å¼","link":"#specified-æ¨¡å¼","children":[]}]}],"git":{"createdTime":1709475838000,"updatedTime":1715445701000,"contributors":[{"name":"nightsoul","email":"w1083670160@163.com","commits":1}]},"readingTime":{"minutes":1.76,"words":528},"filePathRelative":"web/harmony/7-lifeCycle.md","localizedDate":"2024å¹´3æœˆ3æ—¥","excerpt":"\\n<iframe style=\\"border: 1px solid rgba(0, 0, 0, 0.1);\\" sandbox=\\"allow-scripts allow-popups allow-forms allow-modals allow-same-origin\\" width=\\"800\\" height=\\"450\\" src=\\"https://pixso.cn/app/ifr?url=https://pixso.cn/app/board/bnFWVuhoAUXEjcEF2odNsg\\" allowfullscreen=\\"\\"></iframe>\\n<h2>EntryAbility æ–‡ä»¶</h2>\\n<blockquote>\\n<p>hilog.info æ—¥å¿—</p>\\n<p>'%{public}s'  public è¡¨ç¤ºæ—¥å¿—æ˜¯å¦å…¬å¼€</p>\\n</blockquote>","autoDesc":true}`);export{b as comp,v as data};
