import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as t,o as p,c as o,b as n,d as l,e as i,a as s}from"./app-jzX7c5DY.js";const c={},r=s(`<h1 id="rollup-使用案例" tabindex="-1"><a class="header-anchor" href="#rollup-使用案例"><span>rollup 使用案例</span></a></h1><h2 id="初始化" tabindex="-1"><a class="header-anchor" href="#初始化"><span>初始化</span></a></h2><h3 id="依赖安装" tabindex="-1"><a class="header-anchor" href="#依赖安装"><span>依赖安装</span></a></h3><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>yarn init <span class="token operator">-</span>y
yarn add rollup
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置文件" tabindex="-1"><a class="header-anchor" href="#配置文件"><span>配置文件</span></a></h3><p><code>rollup.config.js</code></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">export</span>  <span class="token keyword">default</span>  <span class="token punctuation">{</span>
    <span class="token literal-property property">input</span> <span class="token operator">:</span><span class="token string">&quot;src/index.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">file</span><span class="token operator">:</span><span class="token string">&quot;dist/bundle.js&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">format</span><span class="token operator">:</span><span class="token string">&quot;iife&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动" tabindex="-1"><a class="header-anchor" href="#启动"><span>启动</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">yarn</span> rollup <span class="token parameter variable">--config</span> rollup.config.js

<span class="token comment">#报错</span>

<span class="token function">yarn</span> rollup <span class="token parameter variable">--config</span> rollup.config.js <span class="token parameter variable">--bundleConfigAsCjs</span>

or

fix package.json <span class="token function">add</span>    <span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;module&quot;</span>, 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="插件" tabindex="-1"><a class="header-anchor" href="#插件"><span>插件</span></a></h2><blockquote><p>默认只能够处理 ESModule</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> rollup-plugin-json <span class="token comment"># 用于导入 JSON 兵 tree-shakinng</span>
<span class="token function">yarn</span> <span class="token function">add</span> rollup-plugin-node-resolve <span class="token comment">#允许加载第三方的模块</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="加载-commonjs-模块" tabindex="-1"><a class="header-anchor" href="#加载-commonjs-模块"><span>加载 CommonJS 模块</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> rollup-plugin-commonjs
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="代码拆分" tabindex="-1"><a class="header-anchor" href="#代码拆分"><span>代码拆分</span></a></h2><p>动态导入</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./logger&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>log<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;code split&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>rollup.config.js</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> json <span class="token keyword">from</span> <span class="token string">&quot;rollup-plugin-json&quot;</span>
<span class="token keyword">import</span> nodeResolve <span class="token keyword">from</span> <span class="token string">&quot;rollup-plugin-node-resolve&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> commonjs <span class="token keyword">from</span> <span class="token string">&quot;rollup-plugin-commonjs&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span>  <span class="token keyword">default</span>  <span class="token punctuation">{</span>
    <span class="token literal-property property">input</span> <span class="token operator">:</span><span class="token string">&quot;src/index.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token comment">// file:&quot;dist/bundle.js&quot;,</span>
        <span class="token literal-property property">dir</span><span class="token operator">:</span><span class="token string">&#39;dist&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">format</span><span class="token operator">:</span><span class="token string">&quot;amd&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">nodeResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="多入口打包" tabindex="-1"><a class="header-anchor" href="#多入口打包"><span>多入口打包</span></a></h2><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> json <span class="token keyword">from</span> <span class="token string">&quot;rollup-plugin-json&quot;</span>
<span class="token keyword">import</span> nodeResolve <span class="token keyword">from</span> <span class="token string">&quot;rollup-plugin-node-resolve&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> commonjs <span class="token keyword">from</span> <span class="token string">&quot;rollup-plugin-commonjs&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">export</span>  <span class="token keyword">default</span>  <span class="token punctuation">{</span>
    <span class="token literal-property property">input</span> <span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">&quot;src/xxx.js&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;src/.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token comment">// file:&quot;dist/bundle.js&quot;,</span>
        <span class="token literal-property property">dir</span><span class="token operator">:</span><span class="token string">&#39;dist&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">format</span><span class="token operator">:</span><span class="token string">&quot;amd&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">nodeResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">commonjs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="封装案例" tabindex="-1"><a class="header-anchor" href="#封装案例"><span>封装案例</span></a></h1><blockquote><p>组件封装模版</p></blockquote>`,23),u={href:"https://github.com/NightSquirrl/drop-upload-react",target:"_blank",rel:"noopener noreferrer"},d=s(`<h2 id="初始化-1" tabindex="-1"><a class="header-anchor" href="#初始化-1"><span>初始化</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">npm</span> init vite@latest

<span class="token comment"># 需要的依赖</span>
<span class="token string">&quot;@rollup/plugin-typescript&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^11.1.2&quot;</span>,
<span class="token string">&quot;rollup-plugin-babel&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^4.4.0&quot;</span>,
<span class="token string">&quot;@rollup/plugin-babel&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^6.0.3&quot;</span>,
<span class="token string">&quot;@rollup/plugin-commonjs&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^25.0.3&quot;</span>,
<span class="token string">&quot;@rollup/plugin-node-resolve&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^15.1.0&quot;</span>,
<span class="token string">&quot;typescript&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^5.0.2&quot;</span>,
<span class="token string">&quot;rollup&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^2.79.1&quot;</span>,
<span class="token string">&quot;rollup-plugin-auto-external&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^2.0.0&quot;</span>,
<span class="token string">&quot;rollup-plugin-copy&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^3.4.0&quot;</span>,
<span class="token string">&quot;rollup-plugin-peer-deps-external&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^2.2.4&quot;</span>,
<span class="token string">&quot;rollup-plugin-postcss&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^4.0.2&quot;</span>,
<span class="token string">&quot;sass&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^1.64.1&quot;</span>,
<span class="token string">&quot;tslib&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^2.6.1&quot;</span>,
<span class="token string">&quot;@babel/core&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;^7.22.17&quot;</span>,
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于 UI 组件的封装,直接复制 rollup 文件夹,只需要修改 types 里面的引入既可 打包命令 <code> &quot;build:lib&quot;: &quot;rimraf dist &amp;&amp; npx rollup -c rollup/rollup.config.js&quot;</code></p><p>本地测试: 先进行打包,然后将打包后的文件 dist 修改为任意的名称 xxx,然后进入到该目录,执行 npm link,此时会将该包添加到全局,在需要使用的项目中通过 npm link xxx</p>`,4);function k(m,v){const a=t("ExternalLinkIcon");return p(),o("div",null,[r,n("p",null,[n("a",u,[l("项目地址"),i(a)])]),d])}const h=e(c,[["render",k],["__file","rollup.html.vue"]]),q=JSON.parse('{"path":"/web/componentPackaging/rollup.html","title":"🎃 rollup 快速上手","lang":"zh-CN","frontmatter":{"title":"🎃 rollup 快速上手","tag":["前端","rollup"],"description":"rollup 使用案例 初始化 依赖安装 配置文件 rollup.config.js 启动 插件 默认只能够处理 ESModule 加载 CommonJS 模块 代码拆分 动态导入 rollup.config.js 多入口打包 封装案例 组件封装模版 项目地址 初始化 对于 UI 组件的封装,直接复制 rollup 文件夹,只需要修改 types 里面...","head":[["meta",{"property":"og:url","content":"https://soft-vault.com/web/componentPackaging/rollup.html"}],["meta",{"property":"og:site_name","content":"Night.Soul"}],["meta",{"property":"og:title","content":"🎃 rollup 快速上手"}],["meta",{"property":"og:description","content":"rollup 使用案例 初始化 依赖安装 配置文件 rollup.config.js 启动 插件 默认只能够处理 ESModule 加载 CommonJS 模块 代码拆分 动态导入 rollup.config.js 多入口打包 封装案例 组件封装模版 项目地址 初始化 对于 UI 组件的封装,直接复制 rollup 文件夹,只需要修改 types 里面..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-11T16:41:41.000Z"}],["meta",{"property":"article:author","content":"Night.Soul"}],["meta",{"property":"article:tag","content":"前端"}],["meta",{"property":"article:tag","content":"rollup"}],["meta",{"property":"article:modified_time","content":"2024-05-11T16:41:41.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"🎃 rollup 快速上手\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-11T16:41:41.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Night.Soul\\",\\"url\\":\\"https://github.com/NightSquirrl\\"}]}"]]},"headers":[{"level":2,"title":"初始化","slug":"初始化","link":"#初始化","children":[{"level":3,"title":"依赖安装","slug":"依赖安装","link":"#依赖安装","children":[]},{"level":3,"title":"配置文件","slug":"配置文件","link":"#配置文件","children":[]},{"level":3,"title":"启动","slug":"启动","link":"#启动","children":[]}]},{"level":2,"title":"插件","slug":"插件","link":"#插件","children":[]},{"level":2,"title":"加载 CommonJS 模块","slug":"加载-commonjs-模块","link":"#加载-commonjs-模块","children":[]},{"level":2,"title":"代码拆分","slug":"代码拆分","link":"#代码拆分","children":[]},{"level":2,"title":"多入口打包","slug":"多入口打包","link":"#多入口打包","children":[]},{"level":2,"title":"初始化","slug":"初始化-1","link":"#初始化-1","children":[]}],"git":{"createdTime":1699094106000,"updatedTime":1715445701000,"contributors":[{"name":"nightsoul","email":"w1083670160@163.com","commits":1}]},"readingTime":{"minutes":1.34,"words":401},"filePathRelative":"web/componentPackaging/rollup.md","localizedDate":"2023年11月4日","excerpt":"\\n<h2>初始化</h2>\\n<h3>依赖安装</h3>\\n<div class=\\"language-javascript\\" data-ext=\\"js\\" data-title=\\"js\\"><pre class=\\"language-javascript\\"><code>yarn init <span class=\\"token operator\\">-</span>y\\nyarn add rollup\\n</code></pre></div><h3>配置文件</h3>\\n<p><code>rollup.config.js</code></p>\\n<div class=\\"language-javascript\\" data-ext=\\"js\\" data-title=\\"js\\"><pre class=\\"language-javascript\\"><code><span class=\\"token keyword\\">export</span>  <span class=\\"token keyword\\">default</span>  <span class=\\"token punctuation\\">{</span>\\n    <span class=\\"token literal-property property\\">input</span> <span class=\\"token operator\\">:</span><span class=\\"token string\\">\\"src/index.js\\"</span><span class=\\"token punctuation\\">,</span>\\n    <span class=\\"token literal-property property\\">output</span><span class=\\"token operator\\">:</span><span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token literal-property property\\">file</span><span class=\\"token operator\\">:</span><span class=\\"token string\\">\\"dist/bundle.js\\"</span><span class=\\"token punctuation\\">,</span>\\n        <span class=\\"token literal-property property\\">format</span><span class=\\"token operator\\">:</span><span class=\\"token string\\">\\"iife\\"</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n\\n</code></pre></div>","autoDesc":true}');export{h as comp,q as data};
