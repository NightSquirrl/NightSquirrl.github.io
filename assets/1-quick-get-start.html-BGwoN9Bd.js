import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as o,o as i,c as l,b as n,d as s,e,a as t}from"./app-jzX7c5DY.js";const c={},u=t(`<h2 id="_1-项目的创建方式" tabindex="-1"><a class="header-anchor" href="#_1-项目的创建方式"><span>1. 项目的创建方式</span></a></h2><h3 id="_1-1-创建-uni-app-项目方式" tabindex="-1"><a class="header-anchor" href="#_1-1-创建-uni-app-项目方式"><span>1.1 创建 uni-app 项目方式</span></a></h3><p><strong>uni-app 支持两种方式创建项目：</strong></p><ol><li>通过 HBuilderX 创建（需安装 HBuilderX 编辑器）</li><li>通过命令行创建（需安装 NodeJS 环境）</li></ol><h2 id="_2-hbuilderx-创建-uni-app-项目" tabindex="-1"><a class="header-anchor" href="#_2-hbuilderx-创建-uni-app-项目"><span>2. HBuilderX 创建 uni-app 项目</span></a></h2><ol><li>通过可视化的 hbuilderx 的界面创建项目</li></ol><figure><img src="https://img.picgo.net/2023/11/24/uniapp_picture_2.609bc84658543df29435596a.png" alt="uniapp_picture_2.609bc846" tabindex="0" loading="lazy"><figcaption>uniapp_picture_2.609bc846</figcaption></figure><ol start="2"><li><strong>安装 uni-app vue3 编译器插件</strong></li><li>点击工具-&gt;安装插件,选择 uni-app(vue3)</li><li>打开微信小程序开发者工具,点击设置,点击安全,打开服务端口</li><li>在 hbuilderx 中点击运行,选择微信开发者工具 <ol><li>然后就会在微信小程序打开,可以点击运行实时查看我们的界面</li></ol></li></ol><h2 id="_3-命令行创建-uni-app-项目" tabindex="-1"><a class="header-anchor" href="#_3-命令行创建-uni-app-项目"><span>3. 命令行创建 uni-app 项目</span></a></h2><p><strong>优势</strong></p><p>通过命令行创建 uni-app 项目，<strong>不必依赖 HBuilderX</strong>，TypeScript 类型支持友好。</p><p><strong>命令行创建</strong> <strong>uni-app</strong> <strong>项目：</strong></p><p>vue3 + ts 版</p><h3 id="github" tabindex="-1"><a class="header-anchor" href="#github"><span>github</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 通过 npx 从 github 下载</span>
npx degit dcloudio/uni-preset-vue<span class="token comment">#vite-ts 项目名称</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="国内-gitee" tabindex="-1"><a class="header-anchor" href="#国内-gitee"><span>国内 gitee</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 通过 git 从 gitee 克隆下载</span>
<span class="token function">git</span> clone <span class="token parameter variable">-b</span> vite-ts https://gitee.com/dcloud/uni-preset-vue.git
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,17),r=n("p",null,"常见问题",-1),d=n("li",null,[s("运行 "),n("code",null,"npx"),s(" 命令下载失败，请尝试换成"),n("strong",null,"手机热点重试")],-1),k={href:"https://gitee.com/dcloud/uni-preset-vue/tree/vite-ts/",target:"_blank",rel:"noopener noreferrer"},v=n("code",null,"manifest.json",-1),m={href:"https://mp.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"},b=n("code",null,"npx",-1),g={href:"https://nodejs.org/zh-cn",target:"_blank",rel:"noopener noreferrer"},h=n("code",null,"git",-1),q={href:"https://git-scm.com/download/",target:"_blank",rel:"noopener noreferrer"},y=t('<h2 id="_4-vs-code-开发-uni-app-项目" tabindex="-1"><a class="header-anchor" href="#_4-vs-code-开发-uni-app-项目"><span>4. VS Code 开发 uni-app 项目</span></a></h2><h3 id="为什么选择-vs-code" tabindex="-1"><a class="header-anchor" href="#为什么选择-vs-code"><span>为什么选择 VS Code？</span></a></h3><ul><li>VS Code 对 <strong>TS 类型支持友好</strong>，前端开发者<strong>主流的编辑器</strong></li><li>HbuilderX 对 TS 类型支持暂不完善，期待官方完善 👀</li></ul><h3 id="用-vs-code-开发配置" tabindex="-1"><a class="header-anchor" href="#用-vs-code-开发配置"><span>用 VS Code 开发配置</span></a></h3><p>项目采用 Vue3 + TS 开发 uni-app 项目，所以需要分别安装 Vue3 + TS 插件 和 uni-app 插件。</p><h4 id="安装-vue3-ts-插件" tabindex="-1"><a class="header-anchor" href="#安装-vue3-ts-插件"><span>安装 Vue3 + TS 插件</span></a></h4>',6),f=n("p",null,"注意事项",-1),_=n("p",null,"没开发过 Vue3 + TS 项目的小伙伴注意，需要先安装 Vue3 和 TS 的插件，并完成以下配置 👇",-1),x={href:"https://marketplace.visualstudio.com/items?itemName=Vue.volar",target:"_blank",rel:"noopener noreferrer"},j={href:"https://marketplace.visualstudio.com/items?itemName=Vue.vscode-typescript-vue-plugin",target:"_blank",rel:"noopener noreferrer"},w=n("li",null,[n("strong",null,"工作区禁用"),s(" Vetur 插件(Vue2 插件和 Vue3 插件冲突)")],-1),S=n("li",null,[n("strong",null,"工作区禁用"),s(" @builtin typescript 插件（禁用后自动开启 Vue3 的 TS 托管模式）")],-1),P={href:"https://cn.vuejs.org/guide/typescript/overview.html#ide-support",target:"_blank",rel:"noopener noreferrer"},T=n("figure",null,[n("img",{src:"https://img.picgo.net/2023/11/24/uniapp_vscode_setting.75574ba64ddb340202c90793.png",alt:"uniapp_vscode_setting.75574ba6",tabindex:"0",loading:"lazy"}),n("figcaption",null,"uniapp_vscode_setting.75574ba6")],-1),A=n("h4",{id:"安装-uni-app-插件",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#安装-uni-app-插件"},[n("span",null,"安装 uni-app 插件")])],-1),V={href:"https://marketplace.visualstudio.com/items?itemName=mrmaoddxxaa.create-uniapp-view",target:"_blank",rel:"noopener noreferrer"},B={href:"https://marketplace.visualstudio.com/items?itemName=uni-helper.uni-helper-vscode",target:"_blank",rel:"noopener noreferrer"},I={href:"https://marketplace.visualstudio.com/items?itemName=evils.uniapp-vscode",target:"_blank",rel:"noopener noreferrer"},N=t("<li>👉 TS 类型校验 <ul><li>安装 <strong>类型声明文件</strong> <code>pnpm i -D miniprogram-api-typings @uni-helper/uni-app-types</code></li><li>配置 <code>tsconfig.json</code></li></ul></li><li>👉 JSON 注释问题 <ul><li>设置文件关联，把 <code>manifest.json</code> 和 <code>pages.json</code> 设置为 <code>jsonc</code></li></ul></li>",2),C=t(`<p><code>tsconfig.json</code> 参考</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@vue/tsconfig/tsconfig.json&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;baseUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@/*&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./src/*&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 类型声明文件</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;@dcloudio/types&quot;</span><span class="token punctuation">,</span> <span class="token comment">// uni-app API 类型</span>
      <span class="token string">&quot;miniprogram-api-typings&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 原生微信小程序类型</span>
      <span class="token string">&quot;@uni-helper/uni-app-types&quot;</span> <span class="token comment">// uni-app 组件类型</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// vue 编译器类型，校验标签类型</span>
  <span class="token property">&quot;vueCompilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 原配置 \`experimentalRuntimeMode\` 现调整为 \`nativeTags\`</span>
    <span class="token property">&quot;nativeTags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;block&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;component&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;template&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;slot&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.d.ts&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>工作区设置参考</strong></p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token comment">// .vscode/settings.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">// 在保存时格式化文件</span>
  <span class="token property">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// 文件格式化配置</span>
  <span class="token property">&quot;[json]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 配置语言的文件关联</span>
  <span class="token property">&quot;files.associations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;pages.json&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jsonc&quot;</span><span class="token punctuation">,</span> <span class="token comment">// pages.json 可以写注释</span>
    <span class="token property">&quot;manifest.json&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jsonc&quot;</span> <span class="token comment">// manifest.json 可以写注释</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,4),H=n("p",null,"版本升级",-1),X=n("code",null,"@types/wechat-miniprogram",-1),z={href:"https://github.com/wechat-miniprogram/api-typings",target:"_blank",rel:"noopener noreferrer"},M=n("li",null,[s("原配置 "),n("code",null,"experimentalRuntimeMode"),s(" 现调整为 "),n("code",null,"nativeTags"),s("。")],-1),O=t(`<p>这一步处理很关键，否则 TS 项目无法校验组件属性类型。</p><h2 id="_5-解读-pages-json" tabindex="-1"><a class="header-anchor" href="#_5-解读-pages-json"><span>5. 解读 pages.json</span></a></h2><p>用于配置页面路由、导航栏、tabBar 等页面类信息</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token comment">// 页面路由</span>
  <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 页面样式配置</span>
      <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/my/my&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我的&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 全局样式配置</span>
  <span class="token property">&quot;globalStyle&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;uni-app&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarBackgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#27BA9B&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;backgroundColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#F8F8F8&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// tabBar 配置</span>
  <span class="token property">&quot;tabBar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;selectedColor&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#27BA9B&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/tabs/home_default.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/tabs/home_selected.png&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;pagePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/my/my&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我的&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;iconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/tabs/user_default.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selectedIconPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;static/tabs/user_selected.png&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-uni-app-和原生小程序开发区别" tabindex="-1"><a class="header-anchor" href="#_6-uni-app-和原生小程序开发区别"><span>6. uni-app 和原生小程序开发区别</span></a></h2><h3 id="开发区别" tabindex="-1"><a class="header-anchor" href="#开发区别"><span>开发区别</span></a></h3><p>uni-app 项目每个页面是一个 <code>.vue</code> 文件，数据绑定及事件处理同 <code>Vue.js</code> 规范：</p><ol><li>属性绑定 <code>src=&quot;{ { url }}&quot;</code> 升级成 <code>:src=&quot;url&quot;</code></li><li>事件绑定 <code>bindtap=&quot;eventName&quot;</code> 升级成 <code>@tap=&quot;eventName&quot;</code>，<strong>支持（）传参</strong></li><li>支持 Vue 常用<strong>指令</strong> <code>v-for</code>、<code>v-if</code>、<code>v-show</code>、<code>v-model</code> 等</li></ol><h3 id="其他区别补充" tabindex="-1"><a class="header-anchor" href="#其他区别补充"><span>其他区别补充</span></a></h3><ol><li>调用接口能力，<strong>建议前缀</strong> <code>wx</code> 替换为 <code>uni</code> ，养成好习惯，<strong>支持多端开发</strong>。</li><li><code>&lt;style&gt;</code> 页面样式不需要写 <code>scoped</code>，小程序是多页面应用，<strong>页面样式自动隔离</strong>。</li><li><strong>生命周期分三部分</strong>：应用生命周期(小程序)，页面生命周期(小程序)，组件生命周期(Vue)</li></ol><h2 id="_7-组件库" tabindex="-1"><a class="header-anchor" href="#_7-组件库"><span>7. 组件库</span></a></h2>`,11),D={href:"https://uniapp.dcloud.net.cn/component/uniui/quickstart.html#npm%E5%AE%89%E8%A3%85",target:"_blank",rel:"noopener noreferrer"},R=t(`<div class="language-bahs line-numbers-mode" data-ext="bahs" data-title="bahs"><pre class="language-bahs"><code>pnpm i @dcloudio/uni-ui
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>配置自动导入组件</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token comment">// pages.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">// 组件自动导入</span>
  <span class="token property">&quot;easycom&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;autoscan&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;custom&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
+      <span class="token comment">// uni-ui 规则如下配置  </span>
+      <span class="token property">&quot;^uni-(.*)&quot;</span><span class="token operator">:</span> <span class="token string">&quot;@dcloudio/uni-ui/lib/uni-$1/uni-$1.vue&quot;</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// …省略</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>安装类型声明文件</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> @uni-helper/uni-ui-types
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>配置类型声明文件</strong></p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token comment">// tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token property">&quot;types&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&quot;@dcloudio/types&quot;</span><span class="token punctuation">,</span> <span class="token comment">// uni-app API 类型</span>
      <span class="token string">&quot;miniprogram-api-typings&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 原生微信小程序类型</span>
      <span class="token string">&quot;@uni-helper/uni-app-types&quot;</span><span class="token punctuation">,</span> <span class="token comment">// uni-app 组件类型</span>
+      <span class="token string">&quot;@uni-helper/uni-ui-types&quot;</span> <span class="token comment">// uni-ui 组件类型  </span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// vue 编译器类型，校验标签类型</span>
  <span class="token property">&quot;vueCompilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;nativeTags&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;block&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;component&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;template&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;slot&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-小程序端-pinia-持久化" tabindex="-1"><a class="header-anchor" href="#_8-小程序端-pinia-持久化"><span>8. 小程序端 Pinia 持久化</span></a></h2><p>说明：<code>Pinia</code> 用法与 <code>Vue3</code> 项目完全一致，<code>uni-app</code> 项目仅需解决<strong>持久化插件兼容性</strong>问题。</p><h3 id="持久化存储插件" tabindex="-1"><a class="header-anchor" href="#持久化存储插件"><span>持久化存储插件</span></a></h3>`,10),E={href:"https://prazdevs.github.io/pinia-plugin-persistedstate/zh/guide/config.html#storage",target:"_blank",rel:"noopener noreferrer"},J=t(`<div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> i pinia-plugin-persistedstate
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>插件默认使用 <code>localStorage</code> 实现持久化，小程序端不兼容，需要替换持久化 API。</p><blockquote><p>Stores/modules/member.ts</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token comment">// 定义 Store</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span>
  <span class="token string">&#39;member&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 会员信息</span>
    <span class="token keyword">const</span> profile <span class="token operator">=</span> ref<span class="token operator">&lt;</span>any<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// 保存会员信息，登录时使用</span>
    <span class="token keyword">const</span> <span class="token function-variable function">setProfile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">val</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      profile<span class="token punctuation">.</span>value <span class="token operator">=</span> val
    <span class="token punctuation">}</span>

    <span class="token comment">// 清理会员信息，退出时使用</span>
    <span class="token keyword">const</span> <span class="token function-variable function">clearProfile</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      profile<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 记得 return</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      profile<span class="token punctuation">,</span>
      setProfile<span class="token punctuation">,</span>
      clearProfile<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// TODO: 持久化</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">persist</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Stores/index/ts</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;pinia&#39;</span>
<span class="token keyword">import</span> persist <span class="token keyword">from</span> <span class="token string">&#39;pinia-plugin-persistedstate&#39;</span>

<span class="token comment">// 创建 pinia 实例</span>
<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 使用持久化存储插件</span>
pinia<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>persist<span class="token punctuation">)</span>

<span class="token comment">// 默认导出，给 main.ts 使用</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> pinia

<span class="token comment">// 模块统一导出</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">&#39;./modules/member&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>main.ts</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createSSRApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> pinia <span class="token keyword">from</span> <span class="token string">&#39;./stores&#39;</span>

<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">&#39;./App.vue&#39;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createSSRApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

  app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="多端兼容" tabindex="-1"><a class="header-anchor" href="#多端兼容"><span>多端兼容</span></a></h3><p><strong>网页端持久化 API</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 网页端API</span>
localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>多端持久化 API</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// 兼容多端API</span>
uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>参考代码</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>
<span class="token comment">// stores/modules/member.ts</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useMemberStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span>
  <span class="token string">&#39;member&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//…省略</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// 配置持久化</span>
    <span class="token literal-property property">persist</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 调整为兼容多端的API</span>
      <span class="token literal-property property">storage</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">setItem</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">getItem</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> 
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_9-uni-request-请求封装" tabindex="-1"><a class="header-anchor" href="#_9-uni-request-请求封装"><span>9. uni.request 请求封装</span></a></h2><h3 id="请求和上传文件拦截器" tabindex="-1"><a class="header-anchor" href="#请求和上传文件拦截器"><span>请求和上传文件拦截器</span></a></h3><blockquote><p>实现需求</p><ol><li>拼接基础地址</li><li>设置超时时间</li><li>添加请求头标识</li><li>添加 token</li></ol></blockquote><p>参考代码</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">// src/utils/http.ts</span>

<span class="token comment">// 请求基地址</span>
<span class="token keyword">const</span> baseURL <span class="token operator">=</span> <span class="token string">&#39;https://pcapi-xiaotuxian-front-devtest.itheima.net&#39;</span>

<span class="token comment">// 拦截器配置</span>
<span class="token keyword">const</span> httpInterceptor <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 拦截前触发</span>
  <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">options</span><span class="token operator">:</span> UniApp<span class="token punctuation">.</span>RequestOptions</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1. 非 http 开头需拼接地址</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>options<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">.</span>url <span class="token operator">=</span> baseURL <span class="token operator">+</span> options<span class="token punctuation">.</span>url
    <span class="token punctuation">}</span>
    <span class="token comment">// 2. 请求超时</span>
    options<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">10000</span>
    <span class="token comment">// 3. 添加小程序端请求头标识</span>
    options<span class="token punctuation">.</span>header <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;source-client&#39;</span><span class="token operator">:</span> <span class="token string">&#39;miniapp&#39;</span><span class="token punctuation">,</span>
      <span class="token operator">...</span>options<span class="token punctuation">.</span>header<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 4. 添加 token 请求头标识</span>
    <span class="token keyword">const</span> memberStore <span class="token operator">=</span> <span class="token function">useMemberStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> memberStore<span class="token punctuation">.</span>profile<span class="token operator">?.</span>token
    <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">.</span>header<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> token
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 拦截 request 请求</span>
uni<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token string">&#39;request&#39;</span><span class="token punctuation">,</span> httpInterceptor<span class="token punctuation">)</span>
<span class="token comment">// 拦截 uploadFile 文件上传</span>
uni<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token string">&#39;uploadFile&#39;</span><span class="token punctuation">,</span> httpInterceptor<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,20),U=n("p",null,"常见问题",-1),W=n("p",null,[n("strong",null,"问:"),s(" 为什么用手机预览没有数据？")],-1),F=n("strong",null,"答:",-1),G={href:"https://mp.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"},L=n("div",{class:"language-text line-numbers-mode","data-ext":"text","data-title":"text"},[n("pre",{class:"language-text"},[n("code",null,`https://pcapi-xiaotuxian-front-devtest.itheima.net
`)]),n("div",{class:"line-numbers","aria-hidden":"true"},[n("div",{class:"line-number"})])],-1),Q=t(`<h3 id="封装-promise-请求函数" tabindex="-1"><a class="header-anchor" href="#封装-promise-请求函数"><span>封装 Promise 请求函数</span></a></h3><p>实现需求</p><ol><li>返回 Promise 对象，用于处理返回值类型</li><li>成功 resolve <ol><li>提取数据</li><li>添加泛型</li></ol></li><li>失败 reject <ol><li>401 错误</li><li>其他错误</li><li>网络错误</li></ol></li></ol><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * 请求函数
 * <span class="token keyword">@param</span>  <span class="token parameter">UniApp<span class="token punctuation">.</span>RequestOptions</span>
 * <span class="token keyword">@returns</span> Promise
 *  1. 返回 Promise 对象，用于处理返回值类型
 *  2. 获取数据成功
 *    2.1 提取核心数据 res.data
 *    2.2 添加类型，支持泛型
 *  3. 获取数据失败
 *    3.1 401错误  -&gt; 清理用户信息，跳转到登录页
 *    3.2 其他错误 -&gt; 根据后端错误信息轻提示
 *    3.3 网络错误 -&gt; 提示用户换网络
 */</span>
type Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">code</span><span class="token operator">:</span> string
  <span class="token literal-property property">msg</span><span class="token operator">:</span> string
  <span class="token literal-property property">result</span><span class="token operator">:</span> <span class="token constant">T</span>
<span class="token punctuation">}</span>
<span class="token comment">// 2.2 添加类型，支持泛型</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">options</span><span class="token operator">:</span> UniApp<span class="token punctuation">.</span>RequestOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1. 返回 Promise 对象</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token operator">&lt;</span>Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token operator">...</span>options<span class="token punctuation">,</span>
      <span class="token comment">// 响应成功</span>
      <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 状态码 2xx，参考 axios 的设计</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> res<span class="token punctuation">.</span>statusCode <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 2.1 提取核心数据 res.data</span>
          <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token keyword">as</span> Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>statusCode <span class="token operator">===</span> <span class="token number">401</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 401错误  -&gt; 清理用户信息，跳转到登录页</span>
          <span class="token keyword">const</span> memberStore <span class="token operator">=</span> <span class="token function">useMemberStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          memberStore<span class="token punctuation">.</span><span class="token function">clearProfile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&#39;/pages/login/login&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// 其他错误 -&gt; 根据后端错误信息轻提示</span>
          uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token keyword">as</span> Data<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>msg <span class="token operator">||</span> <span class="token string">&#39;请求错误&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 响应失败</span>
      <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;网络错误，换个网络试试&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10-统一代码风格" tabindex="-1"><a class="header-anchor" href="#_10-统一代码风格"><span>10. 统一代码风格</span></a></h2><ul><li>安装 <code>eslint</code> + <code>prettier</code></li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> eslint prettier eslint-plugin-vue @vue/eslint-config-prettier @vue/eslint-config-typescript @rushstack/eslint-patch @vue/tsconfig
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>新建 <code>.eslintrc.cjs</code> 文件，添加以下 <code>eslint</code> 配置</li></ul><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token comment">/* eslint-env node */</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@rushstack/eslint-patch/modern-module-resolution&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">root</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;plugin:vue/vue3-essential&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;eslint:recommended&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;@vue/eslint-config-typescript&#39;</span><span class="token punctuation">,</span>
    <span class="token string">&#39;@vue/eslint-config-prettier&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 小程序全局变量</span>
  <span class="token literal-property property">globals</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">uni</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">wx</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">WechatMiniprogram</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getCurrentPages</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">getApp</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">UniApp</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">UniHelper</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">App</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">Page</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">Component</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">AnyObject</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">parserOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ecmaVersion</span><span class="token operator">:</span> <span class="token string">&#39;latest&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&#39;prettier/prettier&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token string">&#39;warn&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">singleQuote</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">semi</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token literal-property property">printWidth</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token literal-property property">trailingComma</span><span class="token operator">:</span> <span class="token string">&#39;all&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">endOfLine</span><span class="token operator">:</span> <span class="token string">&#39;auto&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;vue/multi-word-component-names&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;off&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;vue/no-setup-props-destructure&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;off&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;vue/no-deprecated-html-element-is&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;off&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&#39;@typescript-eslint/no-unused-vars&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;off&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>配置 <code>package.json</code></li></ul><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... 省略 ...</span>
    <span class="token property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eslint . --ext .vue,.js,.ts --fix --ignore-path .gitignore&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>运行</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> lint
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="git-工作流规范-husky" tabindex="-1"><a class="header-anchor" href="#git-工作流规范-husky"><span>Git 工作流规范 --- husky</span></a></h3><ul><li>安装并初始化 <code>husky</code></li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> dlx husky-init

npx husky-init
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>安装 <code>lint-staged</code></li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">pnpm</span> i <span class="token parameter variable">-D</span> lint-staged
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>配置 <code>package.json</code></li></ul><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// ... 省略 ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;lint-staged&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;*.{vue,ts,js}&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;eslint --fix&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>修改 <code>.husky/pre-commit</code> 文件</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>- <span class="token function">npm</span> <span class="token builtin class-name">test</span>   
+ <span class="token function">npm</span> run lint-staged  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_11-安全区域" tabindex="-1"><a class="header-anchor" href="#_11-安全区域"><span>11. 安全区域</span></a></h2><p>不同手机的安全区域不同，适配安全区域能防止页面重要内容被遮挡。</p><p>可通过 <code>uni.getSystemInfoSync()</code> 获取屏幕边界到安全区的距离。</p><figure><img src="https://img.picgo.net/2023/11/24/home_picture_2.89dbf50654a7fda1fc332c6b.png" alt="安全区域" tabindex="0" loading="lazy"><figcaption>安全区域</figcaption></figure><p><strong>自定义导航配置</strong></p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token comment">// src/pages.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pages/index/index&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;navigationStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 隐藏默认导航</span>
    <span class="token property">&quot;navigationBarTextStyle&quot;</span><span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;首页&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>组件安全区适配</strong></p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> src<span class="token operator">/</span>pages<span class="token operator">/</span>index<span class="token operator">/</span>componets<span class="token operator">/</span>CustomNavbar<span class="token punctuation">.</span>vue <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">// 获取屏幕边界到安全区域距离</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> safeAreaInsets <span class="token punctuation">}</span> <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getSystemInfoSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 顶部占位 <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>view <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;navbar&quot;</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">&quot;{ paddingTop: safeAreaInsets?.top + &#39;px&#39; }&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">...</span>省略 <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12-父组件调用子组件的方法" tabindex="-1"><a class="header-anchor" href="#_12-父组件调用子组件的方法"><span>12. 父组件调用子组件的方法</span></a></h2><p>实现流程</p><blockquote><p>父组件传递参数 ref=&quot;child&quot;</p><p>获取组件的实例类型主要是 ts 使用</p><p>父组件调用</p><p>Child.value.子方法</p><p>子组件暴漏方法</p></blockquote><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code>
<span class="token keyword">export</span> type types <span class="token operator">=</span> InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span>  子组件<span class="token operator">&gt;</span>


child<span class="token punctuation">.</span>value<span class="token punctuation">.</span>暴漏的方法的 key

<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  暴露方法的 key<span class="token operator">:</span>具体的暴漏方法
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_13-下拉刷新" tabindex="-1"><a class="header-anchor" href="#_13-下拉刷新"><span>13. 下拉刷新</span></a></h2><p>基于 <code>scroll-view</code> 组件实现下拉刷新，需要通过以下方式来实现下拉刷新的功能。</p><ul><li>配置 <code>refresher-enabled</code> 属性，开启下拉刷新交互</li><li>监听 <code>@refresherrefresh</code> 事件，判断用户是否执行了下拉操作</li><li>配置 <code>refresher-triggered</code> 属性，关闭下拉状态</li></ul><h2 id="_14-骨架屏" tabindex="-1"><a class="header-anchor" href="#_14-骨架屏"><span>14. 骨架屏</span></a></h2><p>在微信小程序的模拟器界面点击页面信息</p><figure><img src="https://img.picgo.net/2023/11/24/image-20231124213814562917856bb6661864e.png" alt="image-20231124213814562" tabindex="0" loading="lazy"><figcaption>image-20231124213814562</figcaption></figure><figure><img src="https://img.picgo.net/2023/11/24/image-202311242138293702604bbff0de03b52.png" alt="image-20231124213829370" tabindex="0" loading="lazy"><figcaption>image-20231124213829370</figcaption></figure><p>将生成的代码进行修改 vue 即可</p><h2 id="_15-wx-获取登录凭证" tabindex="-1"><a class="header-anchor" href="#_15-wx-获取登录凭证"><span>15. WX 获取登录凭证</span></a></h2>`,43),Z={href:"https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html",target:"_blank",rel:"noopener noreferrer"},$=t(`<h3 id="获取手机号码" tabindex="-1"><a class="header-anchor" href="#获取手机号码"><span>获取手机号码</span></a></h3><p>出于安全限制，小程序【规定】想获取用户的手机号，必须由用户主动【点击按钮】并【允许申请】才可获取加密的手机号信息。</p><p><strong>前端</strong>：提供 <code>open-type</code> 按钮，在事件处理函数中获取加密的手机号信息。</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;button phone&quot;</span> open<span class="token operator">-</span>type<span class="token operator">=</span><span class="token string">&quot;getPhoneNumber&quot;</span> @getphonenumber<span class="token operator">=</span><span class="token string">&quot;onGetphonenumber&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>text <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;icon icon-phone&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>text<span class="token operator">&gt;</span>
手机号快捷登录
  <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_16-分包预下载" tabindex="-1"><a class="header-anchor" href="#_16-分包预下载"><span>16. 分包预下载</span></a></h2><p>当用户进入【我的】页面时，由框架自动预下载【会员模块】的分包，提升进入后续分包页面时的启动速度。</p><h3 id="操作方式" tabindex="-1"><a class="header-anchor" href="#操作方式"><span>操作方式</span></a></h3><p>新建一个文件夹专门用来存储分包的页面</p><p>如果已经配置了之前 vscode 的插件</p><p>可以右键文件夹选择分包页面</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token comment">// src/pages.json</span>

<span class="token punctuation">{</span>
  <span class="token comment">// ...省略</span>
  <span class="token comment">// 分包加载规则</span>
  <span class="token property">&quot;subPackages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 子包的根目录</span>
      <span class="token property">&quot;root&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pagesMember&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 页面路径和窗口表现</span>
      <span class="token property">&quot;pages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;settings/settings&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;style&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;navigationBarTitleText&quot;</span><span class="token operator">:</span> <span class="token string">&quot;设置&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 分包预下载规则</span>
  <span class="token property">&quot;preloadRule&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;pages/my/my&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span> 
      <span class="token property">&quot;packages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;pagesMember&quot;</span><span class="token punctuation">]</span> 
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_17-项目打包" tabindex="-1"><a class="header-anchor" href="#_17-项目打包"><span>17. 项目打包</span></a></h2><h3 id="核心步骤" tabindex="-1"><a class="header-anchor" href="#核心步骤"><span>核心步骤</span></a></h3><ol><li>运行打包命令 <code>pnpm build:mp-weixin</code></li><li>预览和测试，微信开发者工具导入生成的 <code>/dist/build/mp-weixin</code> 目录</li><li>上传小程序代码</li><li>提交审核和发布</li></ol><h3 id="条件编译" tabindex="-1"><a class="header-anchor" href="#条件编译"><span>条件编译</span></a></h3>`,15),K=n("p",null,"常见问题",-1),Y=n("p",null,"Q：按照 uni-app 规范开发可保证多平台兼容，但每个平台有自己的一些特性，该如何处理？",-1),nn={href:"https://uniapp.dcloud.net.cn/tutorial/platform.html#preprocessor",target:"_blank",rel:"noopener noreferrer"},sn=n("strong",null,"网页端不支持微信平台授权登录等功能",-1),an={href:"https://uniapp.dcloud.net.cn/tutorial/platform.html#preprocessor",target:"_blank",rel:"noopener noreferrer"},en=t(`<h3 id="条件编译语法" tabindex="-1"><a class="header-anchor" href="#条件编译语法"><span>条件编译语法</span></a></h3><p>通过特殊注释，以 <strong><code>#ifdef</code></strong> 或 <strong><code>#ifndef</code></strong> 加 <strong>平台名称</strong> 开头，以 <strong><code>#endif</code></strong> 结尾。</p><p>多平台编译：<strong><code>#ifdef H5 || MP-WEIXIN</code></strong> 表示在 <strong>H5 端 或 微信小程序端</strong> 代码。</p><p>条件编译支持: 支持 .vue, .ts, .js, .scss, .css, pages.json 等文件。</p><div class="language-vue line-numbers-mode" data-ext="vue" data-title="vue"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// 微信平台特有API，需要条件编译</span>
<span class="token comment">// #ifdef MP-WEIXIN</span>
wx<span class="token punctuation">.</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
wx<span class="token punctuation">.</span><span class="token function">requestPayment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// #endif</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 微信开发能力按钮，需要条件编译 --&gt;</span>
  <span class="token comment">&lt;!-- #ifdef MP-WEIXIN --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>openSetting<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>授权管理<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>feedback<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>问题反馈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">open-type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>contact<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>联系我们<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- #endif --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token comment">/* 如果出现样式兼容，也可添加条件编译 */</span>
<span class="token selector">page</span> <span class="token punctuation">{</span>
  <span class="token comment">/* #ifdef H5 */</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
  <span class="token comment">/* #endif */</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>开发技巧</p><p>可通过搜索 <code>wx.</code> 和 <code>open-type</code> 等平台关键词，快速查找需要<strong>小程序端</strong>需添加编译模式的代码。</p></blockquote><h3 id="打包为-h5-端" tabindex="-1"><a class="header-anchor" href="#打包为-h5-端"><span>打包为 H5 端</span></a></h3><p>把当前 uni-app 项目打包成网页(H5)端，并配置路由基础路径。</p><h3 id="核心步骤-1" tabindex="-1"><a class="header-anchor" href="#核心步骤-1"><span>核心步骤</span></a></h3><ol><li>运行打包命令 <code>pnpm build:h5</code></li><li>预览和测试，使用浏览器打开 <code>/dist/build/h5</code> 目录下的 <code>index.html</code> 文件</li><li>由运维部署到服务器</li></ol><h3 id="路由基础路径" tabindex="-1"><a class="header-anchor" href="#路由基础路径"><span>路由基础路径</span></a></h3><p>默认的路由基础路径为 <code>/</code> 根路径，部分网站并不是部署到根路径，需要按运维要求调整。</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code>
<span class="token comment">// manifest.json</span>
<span class="token punctuation">{</span>
  <span class="token comment">/* 网页端特有配置 */</span>
  <span class="token property">&quot;h5&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;router&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 基础路径：./ 为相对路径</span>
      <span class="token property">&quot;base&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token comment">/* 小程序特有相关 */</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mp-weixin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// …省略</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;vueVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="打包为-app-端" tabindex="-1"><a class="header-anchor" href="#打包为-app-端"><span>打包为 APP 端</span></a></h3>`,14),tn={href:"https://uniapp.dcloud.net.cn/tutorial/run/run-app.html",target:"_blank",rel:"noopener noreferrer"},pn=n("code",null,"HBuilderX",-1);function on(ln,cn){const a=o("ExternalLinkIcon");return i(),l("div",null,[u,n("blockquote",null,[r,n("ul",null,[d,n("li",null,[s("换手机热点依旧失败，请尝试从"),n("a",k,[s("国内备用地址下载"),e(a)])]),n("li",null,[s("在 "),v,s(" 文件添加 "),n("a",m,[s("小程序 AppID"),e(a)]),s(" 用于真机预览")]),n("li",null,[s("运行 "),b,s(" 命令需依赖 NodeJS 环境，"),n("a",g,[s("NodeJS 下载地址"),e(a)])]),n("li",null,[s("运行 "),h,s(" 命令需依赖 Git 环境，"),n("a",q,[s("Git 下载地址"),e(a)])])])]),y,n("blockquote",null,[f,_,n("ul",null,[n("li",null,[s("安装 "),n("a",x,[s("Vue Language Features (Volar)"),e(a)]),s(" ：Vue3 语法提示插件")]),n("li",null,[s("安装 "),n("a",j,[s("TypeScript Vue Plugin (Volar)"),e(a)]),s(" ：Vue3 的 TS 插件")]),w,S]),n("p",null,[n("a",P,[s("查看 Vue3 官方文档"),e(a)])])]),T,A,n("ul",null,[n("li",null,[s("👉 安装 uni-app 开发插件 "),n("ul",null,[n("li",null,[n("a",V,[s("uni-create-view"),e(a)]),s(" ：快速创建 uni-app 页面")]),n("li",null,[n("a",B,[s("uni-helper"),e(a)]),s(" ：uni-app 代码提示")]),n("li",null,[n("a",I,[s("uniapp 小程序扩展"),e(a)]),s(" ：鼠标悬停查文档")])])]),N]),C,n("blockquote",null,[H,n("ul",null,[n("li",null,[s("原依赖 "),X,s(" 现调整为 "),n("a",z,[s("miniprogram-api-typings"),e(a)]),s("。")]),M])]),O,n("p",null,[s("安装 "),n("a",D,[s("uni-ui 组件库"),e(a)])]),R,n("p",null,[s("安装持久化存储插件： "),n("a",E,[s("pinia-plugin-persistedstate"),e(a)])]),J,n("blockquote",null,[U,W,n("p",null,[F,s(" 微信小程序端，需登录 "),n("a",G,[s("微信公众平台"),e(a)]),s(" 配置以下地址为合法域名 👇")]),L]),Q,n("p",null,[s("前端：调用 "),n("a",Z,[s("wx.login()"),e(a)]),s(" 接口获取登录凭证（code）。")]),$,n("blockquote",null,[K,Y,n("p",null,[s("A：通过 "),n("a",nn,[s("条件编译"),e(a)]),s("，让代码按条件编译到指定平台。")])]),n("p",null,[sn,s("，可通过 "),n("a",an,[s("条件编译"),e(a)]),s("，实现不同端渲染不同的登录界面。")]),en,n("p",null,[n("a",tn,[s("App 端"),e(a)]),s(" 的打包，预览、测试、发行，使用 "),pn,s(" 工具。")])])}const dn=p(c,[["render",on],["__file","1-quick-get-start.html.vue"]]),kn=JSON.parse('{"path":"/web/uni-app/1-quick-get-start.html","title":"😢 uni-app 快速入门","lang":"zh-CN","frontmatter":{"sticky":true,"title":"😢 uni-app 快速入门","tag":["uni-app"],"top":8,"recommend":1,"description":"1. 项目的创建方式 1.1 创建 uni-app 项目方式 uni-app 支持两种方式创建项目： 通过 HBuilderX 创建（需安装 HBuilderX 编辑器） 通过命令行创建（需安装 NodeJS 环境） 2. HBuilderX 创建 uni-app 项目 通过可视化的 hbuilderx 的界面创建项目 uniapp_picture_2...","head":[["meta",{"property":"og:url","content":"https://soft-vault.com/web/uni-app/1-quick-get-start.html"}],["meta",{"property":"og:site_name","content":"Night.Soul"}],["meta",{"property":"og:title","content":"😢 uni-app 快速入门"}],["meta",{"property":"og:description","content":"1. 项目的创建方式 1.1 创建 uni-app 项目方式 uni-app 支持两种方式创建项目： 通过 HBuilderX 创建（需安装 HBuilderX 编辑器） 通过命令行创建（需安装 NodeJS 环境） 2. HBuilderX 创建 uni-app 项目 通过可视化的 hbuilderx 的界面创建项目 uniapp_picture_2..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://img.picgo.net/2023/11/24/uniapp_picture_2.609bc84658543df29435596a.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-02-05T17:55:50.000Z"}],["meta",{"property":"article:author","content":"Night.Soul"}],["meta",{"property":"article:tag","content":"uni-app"}],["meta",{"property":"article:modified_time","content":"2024-02-05T17:55:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"😢 uni-app 快速入门\\",\\"image\\":[\\"https://img.picgo.net/2023/11/24/uniapp_picture_2.609bc84658543df29435596a.png\\",\\"https://img.picgo.net/2023/11/24/uniapp_vscode_setting.75574ba64ddb340202c90793.png\\",\\"https://img.picgo.net/2023/11/24/home_picture_2.89dbf50654a7fda1fc332c6b.png\\",\\"https://img.picgo.net/2023/11/24/image-20231124213814562917856bb6661864e.png\\",\\"https://img.picgo.net/2023/11/24/image-202311242138293702604bbff0de03b52.png\\"],\\"dateModified\\":\\"2024-02-05T17:55:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Night.Soul\\",\\"url\\":\\"https://github.com/NightSquirrl\\"}]}"]]},"headers":[{"level":2,"title":"1. 项目的创建方式","slug":"_1-项目的创建方式","link":"#_1-项目的创建方式","children":[{"level":3,"title":"1.1 创建 uni-app 项目方式","slug":"_1-1-创建-uni-app-项目方式","link":"#_1-1-创建-uni-app-项目方式","children":[]}]},{"level":2,"title":"2. HBuilderX 创建 uni-app 项目","slug":"_2-hbuilderx-创建-uni-app-项目","link":"#_2-hbuilderx-创建-uni-app-项目","children":[]},{"level":2,"title":"3. 命令行创建 uni-app 项目","slug":"_3-命令行创建-uni-app-项目","link":"#_3-命令行创建-uni-app-项目","children":[{"level":3,"title":"github","slug":"github","link":"#github","children":[]},{"level":3,"title":"国内 gitee","slug":"国内-gitee","link":"#国内-gitee","children":[]}]},{"level":2,"title":"4.  VS Code 开发 uni-app 项目","slug":"_4-vs-code-开发-uni-app-项目","link":"#_4-vs-code-开发-uni-app-项目","children":[{"level":3,"title":"为什么选择 VS Code？","slug":"为什么选择-vs-code","link":"#为什么选择-vs-code","children":[]},{"level":3,"title":"用 VS Code 开发配置","slug":"用-vs-code-开发配置","link":"#用-vs-code-开发配置","children":[]}]},{"level":2,"title":"5. 解读 pages.json","slug":"_5-解读-pages-json","link":"#_5-解读-pages-json","children":[]},{"level":2,"title":"6. uni-app 和原生小程序开发区别","slug":"_6-uni-app-和原生小程序开发区别","link":"#_6-uni-app-和原生小程序开发区别","children":[{"level":3,"title":"开发区别","slug":"开发区别","link":"#开发区别","children":[]},{"level":3,"title":"其他区别补充","slug":"其他区别补充","link":"#其他区别补充","children":[]}]},{"level":2,"title":"7. 组件库","slug":"_7-组件库","link":"#_7-组件库","children":[]},{"level":2,"title":"8. 小程序端 Pinia 持久化","slug":"_8-小程序端-pinia-持久化","link":"#_8-小程序端-pinia-持久化","children":[{"level":3,"title":"持久化存储插件","slug":"持久化存储插件","link":"#持久化存储插件","children":[]},{"level":3,"title":"多端兼容","slug":"多端兼容","link":"#多端兼容","children":[]}]},{"level":2,"title":"9. uni.request 请求封装","slug":"_9-uni-request-请求封装","link":"#_9-uni-request-请求封装","children":[{"level":3,"title":"请求和上传文件拦截器","slug":"请求和上传文件拦截器","link":"#请求和上传文件拦截器","children":[]},{"level":3,"title":"封装 Promise 请求函数","slug":"封装-promise-请求函数","link":"#封装-promise-请求函数","children":[]}]},{"level":2,"title":"10. 统一代码风格","slug":"_10-统一代码风格","link":"#_10-统一代码风格","children":[{"level":3,"title":"Git 工作流规范 --- husky","slug":"git-工作流规范-husky","link":"#git-工作流规范-husky","children":[]}]},{"level":2,"title":"11. 安全区域","slug":"_11-安全区域","link":"#_11-安全区域","children":[]},{"level":2,"title":"12. 父组件调用子组件的方法","slug":"_12-父组件调用子组件的方法","link":"#_12-父组件调用子组件的方法","children":[]},{"level":2,"title":"13. 下拉刷新","slug":"_13-下拉刷新","link":"#_13-下拉刷新","children":[]},{"level":2,"title":"14. 骨架屏","slug":"_14-骨架屏","link":"#_14-骨架屏","children":[]},{"level":2,"title":"15. WX 获取登录凭证","slug":"_15-wx-获取登录凭证","link":"#_15-wx-获取登录凭证","children":[{"level":3,"title":"获取手机号码","slug":"获取手机号码","link":"#获取手机号码","children":[]}]},{"level":2,"title":"16. 分包预下载","slug":"_16-分包预下载","link":"#_16-分包预下载","children":[{"level":3,"title":"操作方式","slug":"操作方式","link":"#操作方式","children":[]}]},{"level":2,"title":"17. 项目打包","slug":"_17-项目打包","link":"#_17-项目打包","children":[{"level":3,"title":"核心步骤","slug":"核心步骤","link":"#核心步骤","children":[]},{"level":3,"title":"条件编译","slug":"条件编译","link":"#条件编译","children":[]},{"level":3,"title":"条件编译语法","slug":"条件编译语法","link":"#条件编译语法","children":[]},{"level":3,"title":"打包为 H5 端","slug":"打包为-h5-端","link":"#打包为-h5-端","children":[]},{"level":3,"title":"核心步骤","slug":"核心步骤-1","link":"#核心步骤-1","children":[]},{"level":3,"title":"路由基础路径","slug":"路由基础路径","link":"#路由基础路径","children":[]},{"level":3,"title":"打包为 APP 端","slug":"打包为-app-端","link":"#打包为-app-端","children":[]}]}],"git":{"createdTime":1700834037000,"updatedTime":1707155750000,"contributors":[{"name":"zeroeldath","email":"zeroeldath@Mac-Pro.local","commits":1}]},"readingTime":{"minutes":12.13,"words":3638},"filePathRelative":"web/uni-app/1-quick-get-start.md","localizedDate":"2023年11月24日","excerpt":"<h2>1. 项目的创建方式</h2>\\n<h3>1.1 创建 uni-app 项目方式</h3>\\n<p><strong>uni-app 支持两种方式创建项目：</strong></p>\\n<ol>\\n<li>通过 HBuilderX 创建（需安装 HBuilderX 编辑器）</li>\\n<li>通过命令行创建（需安装 NodeJS 环境）</li>\\n</ol>\\n<h2>2. HBuilderX 创建 uni-app 项目</h2>\\n<ol>\\n<li>通过可视化的 hbuilderx 的界面创建项目</li>\\n</ol>\\n<figure><img src=\\"https://img.picgo.net/2023/11/24/uniapp_picture_2.609bc84658543df29435596a.png\\" alt=\\"uniapp_picture_2.609bc846\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption>uniapp_picture_2.609bc846</figcaption></figure>","autoDesc":true}');export{dn as comp,kn as data};
